(this.webpackJsonp=this.webpackJsonp||[]).push([[821],{5297:function(e,t,n){"use strict";n.r(t);var o,r=n(3),a=n.n(r),c=n(50),i=n(57),u=n(183),l=n(13),s=n.n(l),d=n(12),p=n(40),f=n(4),b=n.n(f),y=n(89),x=n(20),_=n(1),m=n(44),j=n(88),v=n(17),g=n(16),O=n(626),h=n(2409),w=n(2410),k=n(117);!function(e){e.Name="Name",e.ExportPublicKey="ExportPublicKey",e.ExportPrivateKey="ExportPrivateKey",e.ExportSecretMnemonic="ExportSecretMnemonic",e.ExportPrivateViewKey="ExportPrivateViewKey",e.ExportPrivateSpendKey="ExportPrivateSpendKey",e.HardwareCanNotExportPrivateKey="HardwareCanNotExportPrivateKey",e.RemoveAccount="RemoveAccount"}(o||(o={}));var P=[o.ExportPrivateViewKey,o.ExportPrivateSpendKey,o.ExportSecretMnemonic],M=n(25);function E(e){var t=e.wallet,n=e.networkId,r=Object(j.default)(),a=Object(M.useNetwork)({networkId:n}).network,c=Object(_.useMemo)((function(){return function(e){var t;return(t={})[o.Name]={label:e.formatMessage({id:"form__name"}),key:o.Name},t[o.ExportPublicKey]={label:e.formatMessage({id:"form__export_public_key"}),key:o.ExportPublicKey,description:e.formatMessage({id:"msg__once_exposed_a_third_party_will_be_able_to_see_your_entire_transaction_history"})},t[o.HardwareCanNotExportPrivateKey]={key:o.HardwareCanNotExportPrivateKey},t[o.ExportPrivateKey]={label:e.formatMessage({id:"action__export_private_key"}),key:o.ExportPrivateKey,description:e.formatMessage({id:"msg__once_exposed_a_third_party_will_be_able_to_take_full_control_of_your_account"}),credentialInfo:{type:k.AccountCredentialType.PrivateKey,key:"action__export_private_key"}},t[o.ExportPrivateViewKey]={label:e.formatMessage({id:"action__export_private_view_key"}),description:e.formatMessage({id:"action__export_private_view_key_desc"}),key:o.ExportPrivateViewKey,credentialInfo:{type:k.AccountCredentialType.PrivateViewKey,key:"action__export_view_key"}},t[o.ExportPrivateSpendKey]={label:e.formatMessage({id:"action__export_private_spend_key"}),description:e.formatMessage({id:"action__export_private_spend_key_desc"}),key:o.ExportPrivateSpendKey,credentialInfo:{type:k.AccountCredentialType.PrivateSpendKey,key:"action__export_spend_key"}},t[o.ExportSecretMnemonic]={label:e.formatMessage({id:"action__export_secret_mnemonic"}),description:e.formatMessage({id:"msg__once_exposed_a_third_party_will_be_able_to_take_full_control_of_your_account"}),key:o.ExportSecretMnemonic,credentialInfo:{type:k.AccountCredentialType.Mnemonic,key:"action__export_secret_mnemonic"}},t[o.RemoveAccount]={label:e.formatMessage({id:"action__remove_account"}),key:o.RemoveAccount},t}(r)}),[r]),i=Object(_.useState)([{title:r.formatMessage({id:"content__info"}),data:[c[o.Name]]}]),u=b()(i,2),l=u[0],d=u[1];return Object(_.useEffect)((function(){var e=[];if(a&&t){var n=a.settings,i=n.exportCredentialInfo,u=n.privateKeyExportEnabled;n.publicKeyExportEnabled&&e.push(o.ExportPublicKey),!u||"hd"!==t.type&&"imported"!==t.type||(i?P.forEach((function(t){var n=c[t];i.some((function(e){var t;return e.type===(null==(t=n.credentialInfo)?void 0:t.type)}))&&e.push(t)})):e.push(o.ExportPrivateKey)),"hw"===t.type&&e.push(o.HardwareCanNotExportPrivateKey),e.push(o.RemoveAccount),d((function(t){return[].concat(s()(t),[{title:r.formatMessage({id:"form__security_uppercase"}),data:e.map((function(e){return c[e]}))}])}))}}),[a,t,r,c]),{dataSource:l}}var I=n(0),S=function(e){var t=e.item,n=e.onPress;return Object(I.jsxs)(y.default,{onPress:function(){return n(t)},mx:-2,my:1.5,flexDirection:"column",alignItems:"flex-start",children:[Object(I.jsx)(x.default,{typography:"Body1Strong",color:"text-default",children:t.label}),Object(I.jsx)(x.default,{typography:"Body2",color:"text-subdued",children:t.description})]})},K=function(){var e=Object(j.default)(),t=Object(m.useNavigation)(),n=Object(w.default)(),r=n.goToRemoveAccount,a=n.RemoveAccountDialog,c=Object(_.useState)(!1),l=b()(c,2),f=l[0],k=l[1],M=Object(_.useState)(),K=b()(M,2),C=K[0],A=K[1],R=Object(m.useRoute)().params,N=R.walletId,D=R.accountId,B=R.networkId,T=R.refreshAccounts,F=v.default.engine,V=Object(_.useState)(),z=b()(V,2),H=z[0],q=z[1],L=Object(_.useState)(),W=b()(L,2),G=W[0],J=W[1],U=E({networkId:B,wallet:H}).dataSource,Q=Object(_.useCallback)((function(){N&&F.getWallet(N).then((function(e){q(e)}))}),[F,N]),X=Object(_.useCallback)((function(){D&&B&&F.getAccount(D,B).then((function(e){J(e)})).finally((function(){null==T||T()}))}),[D,F,B,T]);Object(_.useEffect)((function(){Q(),X()}),[]);var Y=Object(O.useWalletName)({wallet:H}),Z=Object(_.useCallback)((function(e){switch(e.key){case o.Name:return A(G),void k(!0);case o.ExportPrivateKey:case o.ExportPrivateSpendKey:case o.ExportPrivateViewKey:case o.ExportSecretMnemonic:return void(e.credentialInfo&&t.navigate(g.RootRoutes.Modal,{screen:g.ModalRoutes.ManagerAccount,params:{screen:g.ManagerAccountModalRoutes.ManagerAccountExportPrivateModal,params:{accountId:D,networkId:B,accountCredential:e.credentialInfo}}}));case o.ExportPublicKey:return void t.navigate(g.RootRoutes.Modal,{screen:g.ModalRoutes.ManagerAccount,params:{screen:g.ManagerAccountModalRoutes.ManagerAccountExportPublicModal,params:{walletId:N,accountId:D,networkId:B}}});case o.RemoveAccount:r({wallet:H,accountId:D,networkId:B,callback:function(){null==T||T(),null!=t&&null!=t.canGoBack&&t.canGoBack()&&t.goBack()}})}}),[G,D,N,r,t,B,T,H]),$=Object(_.useMemo)((function(){return{sections:U,renderSectionHeader:function(e){var t=e.section;return Object(I.jsx)(x.default,{typography:{sm:"Subheading",md:"Subheading"},color:"text-subdued",children:t.title})},renderItem:function(t){var n=t.item;return n.key===o.Name?Object(I.jsxs)(y.default,{onPress:function(){return Z(n)},mx:-2,my:1.5,alignItems:"center",justifyContent:"space-between",children:[Object(I.jsx)(x.default,{typography:"Body1Strong",children:n.label}),Object(I.jsxs)(d.default,{alignItems:"center",flexDirection:"row",children:[Object(I.jsx)(x.default,{typography:"Body1Strong",color:"text-subdued",children:null==G?void 0:G.name}),Object(I.jsx)(p.default,{name:"ChevronRightMini",color:"icon-subdued",size:15})]})]}):[o.ExportPublicKey,o.ExportPrivateKey].concat(s()(P)).includes(n.key)?Object(I.jsx)(S,{item:n,onPress:function(){return Z(n)}}):n.key===o.HardwareCanNotExportPrivateKey?Object(I.jsx)(u.default,{title:e.formatMessage({id:"msg__for_the_security_of_your_assets_the_hardware_wallet_firmware_restricts_the_private_key_from_being_exported"}),dismiss:!1,alertType:"info",customIconName:"InformationCircleMini"}):n.key===o.RemoveAccount?Object(I.jsx)(y.default,{onPress:function(){return Z(n)},mx:-2,my:1.5,children:Object(I.jsx)(x.default,{typography:"Body1Strong",color:"text-critical",children:n.label})}):null},renderSectionFooter:function(){return Object(I.jsx)(d.default,{h:5})}}}),[U,G,e,Z]);return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(i.default,{header:null==G?void 0:G.name,headerDescription:Y,footer:null,sectionListProps:$}),a,Object(I.jsx)(h.default,{visible:f,account:C,onClose:function(){return k(!1)},onDone:function(){X()}})]})},C=n(214),A=n(54),R=n(1065),N=n(48),D=n(1355),B=n(51),T=n(76),F=n(106),V=n(235),z=n(2411),H=n.n(z),q=n(1154),L=n.n(q),W=function(e){var t=e.qrCodeContainerSize;return Object(I.jsxs)(D.default,{w:t,h:t,children:[Object(I.jsx)(F.default,{borderRadius:"24px",source:H.a,w:t,h:t}),Object(I.jsx)(B.default,{w:"100%",h:"100%",children:Object(I.jsx)(T.default,{})})]})},G=function(e){var t=e.privateOrPublicKey,n=e.qrCodeContainerSize,o=Object(j.default)(),r=Object(c.default)(),a=Object(_.useCallback)((function(){Object(V.copyToClipboard)(null!=t?t:""),N.default.show({title:o.formatMessage({id:"msg__copied"})})}),[t,o]);return Object(I.jsxs)(d.default,{py:"24px",justifyContent:"center",flexDirection:"column",children:[Object(I.jsx)(d.default,{minH:n,alignItems:"center",flexDirection:"column",children:t?Object(I.jsx)(d.default,{borderRadius:"24px",bgColor:"#FFFFFF",p:r?"16px":"11px",shadow:"depth.4",children:!!t&&Object(I.jsx)(R.default,{value:t,logo:L.a,size:r?264:186,logoSize:r?57:40,logoMargin:r?4:2,logoBackgroundColor:"white"})}):Object(I.jsx)(W,{qrCodeContainerSize:n})}),Object(I.jsxs)(d.default,{alignItems:"center",mt:r?"32px":"24px",px:r?"24px":"32px",children:[Object(I.jsx)(x.default,{color:"text-subdued",textAlign:"center",typography:{sm:"Body1",md:"Body2"},w:"full",maxW:"full",children:t}),Object(I.jsx)(A.default,{width:r?"188px":"154px",height:r?"48px":"36px",mt:r?"32px":"24px",type:"plain",size:r?"xl":"base",leftIconName:"Square2StackMini",onPress:a,isLoading:!t,children:o.formatMessage({id:"action__copy"})})]})]})},J=function(e){var t=e.accountId,n=e.networkId,o=e.password,r=e.credentialType,a=e.onAccountChange,c=v.default.engine,i=Object(_.useState)(),u=b()(i,2),l=u[0],s=u[1];return Object(_.useEffect)((function(){t&&n&&o&&(c.getAccount(t,n).then((function(e){a(e)})),c.getAccountPrivateKey({accountId:t,credentialType:r,password:o}).then((function(e){s(e)})))}),[t,c,n,o]),Object(I.jsx)(G,{privateOrPublicKey:l,qrCodeContainerSize:{base:296,md:208}})},U=function(){var e=Object(j.default)(),t=Object(m.useRoute)().params,n=t.accountId,o=t.networkId,r=t.accountCredential,a=Object(_.useState)(),c=b()(a,2),u=c[0],l=c[1];return Object(I.jsx)(i.default,{footer:null,header:e.formatMessage({id:r.key}),headerDescription:null==u?void 0:u.name,height:"auto",children:Object(I.jsx)(C.default,{walletId:null,skipSavePassword:!0,field:C.ValidationFields.Secret,children:function(e){return Object(I.jsx)(J,{accountId:n,networkId:o,credentialType:r.type,password:e,onAccountChange:function(e){return l(e)}})}})})},Q=n(2),X=n.n(Q),Y=n(111),Z=n(80),$=function(e){var t=e.walletId,n=e.accountId,o=e.networkId,r=e.password,a=e.onAccountChange,c=v.default.engine,i=Object(_.useState)(),u=b()(i,2),l=u[0],s=u[1],d=Object(Y.default)();return Object(_.useEffect)((function(){X()((function*(){try{if(!n||!o)return;var e=yield c.getAccount(n,o);a(e);var i=yield c.recomputeAccount({walletId:t,networkId:o,accountId:n,password:r,path:e.path,template:e.template,confirmOnDevice:!0});i&&s(i.xpub)}catch(u){Z.deviceUtils.showErrorToast(u),null==d.goBack||d.goBack()}}))()}),[t,n,c,o,r]),Object(I.jsx)(G,{privateOrPublicKey:l,qrCodeContainerSize:{base:296,md:208}})},ee=function(){var e=Object(j.default)(),t=Object(m.useRoute)().params,n=t.accountId,o=t.networkId,r=t.walletId,a=Object(_.useState)(),c=b()(a,2),u=c[0],l=c[1];return Object(I.jsx)(i.default,{footer:null,header:e.formatMessage({id:"title__export_public_key"}),headerDescription:null==u?void 0:u.name,height:"auto",children:Object(I.jsx)(C.default,{walletId:r,skipSavePassword:!0,field:C.ValidationFields.Secret,children:function(e){return Object(I.jsx)($,{accountId:n,networkId:o,walletId:r,password:e,onAccountChange:function(e){return l(e)}})}})})},te=n(475),ne=n(234);function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}var re=Object(ne.default)(),ae=[{name:g.ManagerAccountModalRoutes.ManagerAccountModal,component:K},{name:g.ManagerAccountModalRoutes.ManagerAccountExportPrivateModal,component:U},{name:g.ManagerAccountModalRoutes.ManagerAccountExportPublicModal,component:ee}];t.default=function(){var e=Object(c.default)();return Object(I.jsx)(re.Navigator,{screenOptions:function(t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(te.buildModalStackNavigatorOptions)({isVerticalLayout:e,navInfo:t}))},children:ae.map((function(e){return Object(I.jsx)(re.Screen,{name:e.name,component:e.component},e.name)}))})}}}]);