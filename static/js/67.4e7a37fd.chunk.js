(this.webpackJsonp=this.webpackJsonp||[]).push([[67],{3973:function(e,t,n){"use strict";n.r(t),n.d(t,"useCurrencyData",(function(){return d})),n.d(t,"useCurrencyListData",(function(){return f})),n.d(t,"useCurrencyUnit",(function(){return b}));var o=n(13),r=n.n(o),a=n(4014),i=n.n(a),c=n(1),s=n(25),l=["usd","eur","gbp","jpy","cny","hkd"],u=["btc","eth","sats","bits"],d=function(e){var t=Object(s.useAppSelector)((function(e){return e.fiatMoney.map}));return Object(c.useMemo)((function(){var n;return null!=(n=t[e])?n:{}}),[t,e])},f=function(){var e=Object(s.useAppSelector)((function(e){return e.fiatMoney.symbolList})),t=Object(s.useAppSelector)((function(e){return e.fiatMoney.map})),n=i()(l,e),o=i()(u,e);return{popularList:n,ratesSectionList:[{title:"crypto",data:r()(o)},{title:"fiat",data:e.filter((function(e){var n,o;return null==(n=t[e])||null==(o=n.type)?void 0:o.includes("fiat")}))}]}},b=function(e){var t=d(e).unit;return Object(c.useMemo)((function(){return null!=t?t:"$"}),[t])}},4014:function(e,t,n){var o=n(949),r=n(4015),a=n(1598),i=n(4016),c=a((function(e){var t=o(e,i);return t.length&&t[0]===e[0]?r(t):[]}));e.exports=c},4015:function(e,t,n){var o=n(1353),r=n(1601),a=n(1602),i=n(949),c=n(951),s=n(1354),l=Math.min;e.exports=function(e,t,n){for(var u=n?a:r,d=e[0].length,f=e.length,b=f,m=Array(f),j=1/0,O=[];b--;){var g=e[b];b&&t&&(g=i(g,c(t))),j=l(g.length,j),m[b]=!n&&(t||d>=120&&g.length>=120)?new o(b&&g):void 0}g=e[0];var p=-1,h=m[0];e:for(;++p<d&&O.length<j;){var y=g[p],k=t?t(y):y;if(y=n||0!==y?y:0,!(h?s(h,k):u(O,k,n))){for(b=f;--b;){var x=m[b];if(!(x?s(x,k):u(e[b],k,n)))continue e}h&&h.push(k),O.push(y)}}return O}},4016:function(e,t,n){var o=n(1597);e.exports=function(e){return o(e)?e:[]}},4138:function(e,t,n){"use strict";n.r(t),n.d(t,"AddCustomToken",(function(){return y}));var o=n(57),r=n(225),a=n(47),i=n(48),c=n(2),s=n.n(c),l=n(126),u=n(50),d=n(4),f=n.n(d),b=n(1),m=n(44),j=n(88),O=n(17),g=n(25),p=n(16),h=n(0),y=function(e){var t,n,c=e.route,d=null==(t=c.params)?void 0:t.address,y=null==(n=c.params)?void 0:n.networkId,k=Object(j.default)(),x=Object(m.useNavigation)(),v=Object(b.useState)(!1),_=f()(v,2),M=_[0],w=_[1],A=Object(b.useState)(!1),T=f()(A,2),I=T[0],P=T[1],S=Object(b.useState)(!1),C=f()(S,2),D=C[0],R=C[1],B=Object(g.useActiveWalletAccount)(),N=B.walletId,L=B.account,E=B.network,z=Object(g.useNetworkSimple)(null!=y?y:null,E),W=Object(u.default)(),V=Object(g.useAccountTokensOnChain)(null==z?void 0:z.id,null==L?void 0:L.id),F=k.formatMessage({id:"form__searching_token"}),U=Object(l.default)({defaultValues:{address:"",symbol:"",decimal:""},mode:"onChange"}),q=U.control,K=U.handleSubmit,G=U.setValue,Y=U.formState.isValid,H=U.trigger,J=U.setError,Q=U.watch;Object(b.useEffect)((function(){d&&G("address",d)}),[d,G]);var X=Q("address"),Z=Object(g.useDebounce)(X,1e3),$=Object(b.useCallback)(function(){var e=s()((function*(e,t,n){(yield O.default.serviceToken.addAccountToken(t,e,n))&&(i.default.show({title:k.formatMessage({id:"msg__token_added",defaultMessage:"Token Added"})}),yield O.default.serviceToken.fetchAccountTokens({accountId:e,networkId:t}),null!=x&&null!=x.canGoBack&&x.canGoBack()&&x.goBack())}));return function(t,n,o){return e.apply(this,arguments)}}(),[k,x]),ee=Object(b.useCallback)(function(){var e=s()((function*(e){if(z&&L){w(!0);var t=L.id,n=z.id,o=e.address,r=yield O.default.engine.getVaultSettings(z.id);null!=r&&r.activateTokenRequired?x.navigate(p.RootRoutes.Modal,{screen:p.ModalRoutes.ManageToken,params:{screen:p.ManageTokenModalRoutes.ActivateToken,params:{walletId:N,accountId:t,networkId:n,tokenId:o,onSuccess:function(){$(t,n,o).finally((function(){w(!1)}))}}}}):$(t,n,o).finally((function(){w(!1)}))}}));return function(t){return e.apply(this,arguments)}}(),[z,L,x,N,$]),te=Object(b.useCallback)((function(e){e?(G("decimal",String(e.decimals)),G("symbol",e.symbol),R(!0),H("address")):(J("address",{message:k.formatMessage({id:"msg__wrong_address_format"})}),R(!1),G("decimal",""),G("symbol",""))}),[G,H,J,k]);return Object(b.useEffect)((function(){function e(){return(e=s()((function*(){if(z){var e=yield O.default.validator.normalizeTokenAddress(null==z?void 0:z.id,Z);if(!V.some((function(t){return t.tokenIdOnNetwork===e}))&&L&&e){var t;P(!0);try{var n,o;if(null!=(n=t=yield O.default.engine.preAddToken(L.id,z.id,e))&&n[1])te(null==(o=t)?void 0:o[1]);else te(void 0)}catch(r){te(void 0)}finally{P(!1)}}}}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[d,L,z,te,Z]),Object(h.jsx)(o.default,{header:k.formatMessage({id:"action__add_custom_tokens",defaultMessage:"Add Custom Token"}),hideSecondaryAction:!0,primaryActionTranslationId:"action__add",primaryActionProps:{type:"primary",isDisabled:!Y&&!I,isLoading:M},onPrimaryActionPress:function(){return K(ee)()},children:Object(h.jsx)(r.default,{children:Object(h.jsxs)(a.default,{children:[Object(h.jsx)(a.default.Item,{name:"address",label:k.formatMessage({id:"transaction__contract_address",defaultMessage:"Contract Address"}),control:q,defaultValue:"",labelAddon:["paste"],helpText:I?F:void 0,rules:{required:k.formatMessage({id:"form__field_is_required"}),validate:function(){var e=s()((function*(e){if(z){var t=yield O.default.validator.normalizeTokenAddress(null==z?void 0:z.id,e);return V.some((function(e){return e.tokenIdOnNetwork===t}))?k.formatMessage({id:"msg__token_already_existed"}):void 0}}));return function(t){return e.apply(this,arguments)}}()},children:Object(h.jsx)(a.default.Textarea,{trimValue:!0,placeholder:k.formatMessage({id:"form__enter_or_paste_contract_address",defaultMessage:"Enter or paste contract address"})})}),Object(h.jsx)(a.default.Item,{name:"symbol",label:k.formatMessage({id:"form__token_symbol",defaultMessage:"Token Symbol"}),rules:{required:k.formatMessage({id:"form__field_is_required"})},defaultValue:"",control:q,children:Object(h.jsx)(a.default.Input,{size:W?"xl":"default",isDisabled:D})}),Object(h.jsx)(a.default.Item,{name:"decimal",label:k.formatMessage({id:"form__decimal",defaultMessage:"Decimal"}),control:q,defaultValue:"",rules:{required:k.formatMessage({id:"form__field_is_required"})},children:Object(h.jsx)(a.default.Input,{size:W?"xl":"default",isDisabled:D})})]})})})};t.default=y},4139:function(e,t,n){"use strict";n.r(t),n.d(t,"ListEmptyComponent",(function(){return s}));var o=n(201),r=n(51),a=n(76),i=n(88),c=n(0),s=function(e){var t=e.isLoading,n=e.symbol,s=e.desc,l=Object(i.default)();if(t)return Object(c.jsx)(r.default,{w:"full",h:"20",children:Object(c.jsx)(a.default,{size:"lg"})});var u=n?l.formatMessage({id:"title__no_alert_desc"},{0:n}):"";return Object(c.jsx)(r.default,{w:"full",h:"full",children:Object(c.jsx)(o.default,{emoji:"\ud83d\udd14",title:l.formatMessage({id:"title__no_alert"}),subTitle:s||u})})}},4293:function(e,t,n){"use strict";n.r(t),n.d(t,"FormatCurrencyNumber",(function(){return _}));var o=n(12),r=n(82),a=n(76),i=n(20),c=n(121),s=n(358),l=n.n(s),u=n(2),d=n.n(u),f=n(4),b=n.n(f),m=n(15),j=n.n(m),O=n(1),g=n(37),p=n(19),h=n(17),y=n(822),k=n(3973),x=n(0),v=["divider","alert"];function _(e){var t=e.value,n=e.onlyNumber,o=e.unit;return"number"!==typeof t?null:"sats"===o.toLowerCase()?Object(x.jsxs)(x.Fragment,{children:[t<.01?""+Object(y.formatDecimalZero)(t):Object(x.jsx)(g.FormattedNumber,{value:null!=t?t:0,style:"decimal",minimumFractionDigits:2,maximumFractionDigits:10})," "+(n?"":o)]}):Object(x.jsxs)(x.Fragment,{children:[""+(n?"":o),t<.01?""+Object(y.formatDecimalZero)(t):Object(x.jsx)(g.FormattedNumber,{value:null!=t?t:0,style:"decimal",minimumFractionDigits:2,maximumFractionDigits:10})]})}t.default=function(e){var t=e.divider,n=e.alert,s=j()(e,v),u=n.price,f=n.currency,m=Object(k.useCurrencyUnit)(f),g=Object(O.useState)(!1),y=b()(g,2),M=y[0],w=y[1],A=Object(O.useCallback)(d()((function*(){w(!0);try{yield h.default.serviceNotification.removePriceAlertConfig(l()(n,"price","currency","coingeckoId"))}catch(e){p.default.common.error("remove PriceAlert",e instanceof Error?null==e?void 0:e.message:e)}setTimeout((function(){w(!1),null==s||s.onRemove(n.price)}),200)})),[s,n]);return Object(x.jsx)(o.default,{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",py:4,px:{base:4,md:6},borderBottomWidth:t?"1 ":void 0,borderBottomColor:"divider",borderBottomRadius:t?void 0:"12px",children:Object(x.jsxs)(o.default,{flex:"1",flexDirection:"row",alignItems:"center",children:[Object(x.jsx)(c.default,{size:8,token:n,showNetworkIcon:!0}),Object(x.jsxs)(i.default,{typography:"Body1Strong",numberOfLines:1,ml:3,flex:"1",children:["1 "+n.symbol+" = ",Object(x.jsx)(_,{value:+(u||0),unit:m})]}),Object(x.jsx)(o.default,{w:"8",h:"8",alignItems:"center",justifyContent:"center",children:M?Object(x.jsx)(a.default,{size:"sm"}):Object(x.jsx)(r.default,{name:"TrashMini",type:"plain",circle:!0,onPress:A})})]})})}},4517:function(e,t,n){e.exports=n.p+"static/media/NoRisks.51a2d40f.png"},5226:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAUCAYAAABiS3YzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHySURBVHgB7ZM/TNNBFMe/d78WAwTTuKgTRKMmJlZqnBxMSExEYxxNTFww0dYJdWEw0Q4ODgxO9Be0qaPROAgDCWEoC1sphYWQEBggkLCU/4G29/jer6Q/CIWWsPKS3/u9d3fv8+69uwPO5UyScwcwkYgeHFLHLhZRyPTfgmOuVJ2PvEsjl+gl4gW9BcBJ4u6bpJ0KHFmcTYUQ2H2PSbcbQRWqnld+U6Uh6hKUtAC6ETDN1XeaTbTB0SPc5XUG5hn0h/bSoTWOXkWpIYVIV97zJ1i+VmMIR79Vh+bcQepnUKqfgT2VwFOKD824nWzGEATDaI89xnSyBYXiRxhzj0kuctfCUhXtZdyJvjwJ6vc0iKcEsmr0ev5O4T91h5fXjltlsEYVRw3xoYLbZfhWBln3hgc0Mkr4KzQ3FsqJzDrux7ZqQbVvyor32wg0AdvW3mWprWgKPoIUn3hfQDox/rO1fqjRs97/QsNzRD7kWWqclbexl6nKp/APTjGNyb5rJ0H9g5r6cRmmNMM2bPIaPeDlnveumFYPeUDl5KLaqbu5JsXDfF0baiWb+ETIV1rzEN3DF/KXLZAD8zbJHKPSCMc66oOWA+MM/LLv2QNa9CfFvrAQlO5C+O2v+qFWbM9K6jPhN+ldrYwbYRLdh0j0O87lONkDPy+j0BarmOUAAAAASUVORK5CYII="},5291:function(e,t,n){"use strict";n.r(t);var o=n(3),r=n.n(o),a=n(50),i=n(4),c=n.n(i),s=n(57),l=n(225),u=n(12),d=n(27),f=n(121),b=n(2),m=n.n(b),j=n(627),O=n(48),g=n(64),p=n(20),h=n(1),y=n(44),k=n(88),x=n(108),v=n(235),_=n(136),M=n(308),w=n(19),A=n(17),T=n(25),I=n(45),P=n(343),S=n(421),C=n(369),D=n(16),R=n(46),B=n(888),N=n(190),L=n(0);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var W=function(){var e,t=Object(y.useRoute)().params;if("query"in t){var n=JSON.parse(t.query).options,o=n.address,r=n.symbol,a=n.decimals,i=n.image,c=n.sendAddress;e={name:null!=r?r:"",address:o,symbol:null!=r?r:"",decimal:null!=a?a:0,logoURI:null!=i?i:"",sendAddress:null!=c?c:void 0}}else e=t;if("query"in t){var s,l=JSON.parse(t.query).options,u=l.address,d=l.symbol,f=l.decimals,b=l.image,m=l.sendAddress;return{name:null!=d?d:"",address:u,symbol:null!=d?d:"",decimal:null!=f?f:0,logoURI:null!=b?b:"",riskLevel:null!=(s=e.riskLevel)?s:M.TokenRiskLevel.UNKNOWN,sendAddress:null!=m?m:void 0}}return t};function V(e){var t,n,o=Object(I.useActiveWalletAccount)(),r=o.account,a=o.network,i=o.networkId,c=o.accountId,b=Object(C.default)(a).openAddressDetails,y=Object(T.useAccountTokensBalance)(i,c),M=Object(k.default)(),w=Object(S.default)().sourceInfo,P=W(),D=P.name,R=P.symbol,E=P.decimal,V=P.address,F=Object(h.useCallback)((function(e){return Object(L.jsx)(g.default,z(z({accessibilityLabel:"More options menu"},e),{},{children:Object(L.jsx)(p.default,{typography:{sm:"Body1Strong",md:"Body2Strong"},maxW:"56",textAlign:"right",children:Object(x.shortenAddress)(V)})}))}),[V]),U=Object(h.useCallback)((function(){setTimeout((function(){V&&Object(v.copyToClipboard)(V)}),200),O.default.show({title:M.formatMessage({id:"msg__copied"})})}),[V,M]),q=Object(h.useCallback)((function(){b(V,M.formatMessage({id:"form__explorers"}))}),[M,V,b]),K=Object(h.useMemo)((function(){var e,t=[{label:M.formatMessage({id:"form__name",defaultMessage:"Name"}),value:D},{label:M.formatMessage({id:"form__symbol",defaultMessage:"Symbol"}),value:R},{label:M.formatMessage({id:"form__contract",defaultMessage:"Contact"}),value:Object(L.jsxs)(j.default,{w:"190",trigger:F,offset:N.defaultMenuOffset,placement:"bottom right",children:[Object(L.jsx)(j.default.CustomItem,{onPress:U,icon:"DocumentDuplicateMini",children:M.formatMessage({id:"action__copy_address"})}),!(null!=a&&null!=(e=a.settings)&&e.hiddenBlockBrowserTokenDetailLink)&&Object(L.jsx)(j.default.CustomItem,{onPress:q,icon:"ArrowTopRightOnSquareMini",children:M.formatMessage({id:"action__view_in_browser"})})]})},{label:M.formatMessage({id:"form__decimal",defaultMessage:"Decimal"}),value:String(E)}].filter((function(e){return!!e.value})),n=(y[Object(_.getBalanceKey)(P)]||{balance:"0"}).balance;return n&&t.push({label:M.formatMessage({id:"content__balance",defaultMessage:"Balance"}),value:null!=n?n:"0"}),t}),[D,R,E,y,M,P,null==a||null==(t=a.settings)?void 0:t.hiddenBlockBrowserTokenDetailLink,U,F,q]);return Object(h.useEffect)((function(){function e(){return(e=m()((function*(){r&&a&&(yield A.default.serviceToken.getAccountTokenBalance({accountId:r.id,networkId:a.id,tokenIds:[V]}))}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[r,a,V]),Object(L.jsx)(s.default,z({height:"560px",footer:null,scrollViewProps:{children:Object(L.jsx)(l.default,{children:Object(L.jsxs)(u.default,{children:[Object(L.jsxs)(u.default,{flexDirection:"column",alignItems:"center",justifyContent:"center",mb:"8",mt:"6",children:[Object(L.jsx)(f.default,{token:P,size:"56px"}),Object(L.jsxs)(u.default,{alignItems:"center",flexDirection:"row",justifyContent:"center",mt:"4",children:[Object(L.jsx)(d.default.PageHeading,{children:M.formatMessage({id:"title__adding_str"},{0:R})}),Object(L.jsx)(f.TokenVerifiedIcon,{token:z(z({},P),{},{networkId:null!=(n=null==a?void 0:a.id)?n:""})})]}),null!=w&&w.origin?Object(L.jsx)(B.SiteSection,{mt:"2",url:null==w?void 0:w.origin}):null]}),K.map((function(e,t){return Object(L.jsxs)(u.default,{display:"flex",flexDirection:"row",justifyContent:"space-between",p:"4",alignItems:"center",borderTopColor:"divider",borderTopWidth:0!==t?"1":void 0,children:[Object(L.jsx)(p.default,{typography:{sm:"Body1Strong",md:"Body2Strong"},color:"text-subdued",children:e.label}),"string"===typeof e.value?Object(L.jsx)(p.default,{typography:{sm:"Body1Strong",md:"Body2Strong"},maxW:"56",textAlign:"right",children:e.value}):e.value]},t)}))]})})}},e))}var F=function(){var e,t,n=Object(I.useActiveWalletAccount)(),o=n.walletId,r=n.account,a=n.network,i=Object(k.default)(),s=Object(h.useState)(!1),l=c()(s,2),u=l[0],d=l[1],f=Object(T.useAccountTokensOnChain)(null==a?void 0:a.id,null==r?void 0:r.id),b=Object(y.useNavigation)(),j=W(),g=Object(S.default)(),p=j.address,x=j.logoURI,v=Object(P.default)({id:null!=(e=null==(t=g.sourceInfo)?void 0:t.id)?e:""}),_=Object(h.useCallback)(m()((function*(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.close;if(r&&a){try{d(!0);var n={address:p};f.some((function(e){return e.tokenIdOnNetwork===p}))?O.default.show({title:i.formatMessage({id:"msg__token_already_existed"})}):(n=yield A.default.serviceToken.addAccountToken(a.id,r.id,p,x),O.default.show({title:i.formatMessage({id:"msg__token_added",defaultMessage:"Token Added"})})),yield Object(R.wait)(1e3),yield v.resolve({close:t,result:n}),b.canGoBack()&&b.goBack()}catch(o){w.default.common.error("add token faild",o,p)}d(!1)}})),[f,r,a,p,i,v,x,b]),M=Object(h.useCallback)(m()((function*(){if(r&&a){var e=yield A.default.engine.getVaultSettings(null==a?void 0:a.id);null!=e&&e.activateTokenRequired?b.navigate(D.ManageTokenModalRoutes.ActivateToken,{walletId:o,accountId:null==r?void 0:r.id,networkId:null==a?void 0:a.id,tokenId:p,onSuccess:function(){_()}}):_()}})),[r,a,_,p,b,o]);return Object(L.jsx)(V,{footer:!0,hideSecondaryAction:!0,primaryActionTranslationId:"action__confirm",onModalClose:function(){v.reject()},primaryActionProps:{isLoading:u},onPrimaryActionPress:M})},U=n(4138),q=n(109),K=n(40),G=n(201),Y=n(51),H=n(76),J=n(662),Q=n(82),X=n(125),Z=n(203),$=n(80),ee=n(99),te=n(663),ne=n(2416),oe=n(63),re=n(41),ae=n(54),ie=n(299),ce=n(771);function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ue=function(e){var t,n,o=e.title,r=e.content,a=e.hidePrimaryAction,i=e.hideSecondaryAction,c=e.primaryActionTranslationId,s=e.secondaryActionTranslationId,l=e.onPrimaryActionPress,u=e.onSecondaryActionPress,f=e.secondaryActionProps,b=e.primaryActionProps,m=e.onClose,j=Object(k.default)(),O=Object(ie.default)().bottom;return Object(L.jsxs)(oe.default,{pb:O+"px",children:[Object(L.jsx)(p.default,{fontWeight:"700",fontSize:"56px",textAlign:"center",mb:"3",children:"\u2139\ufe0f"}),Object(L.jsx)(d.default.DisplayMedium,{textAlign:"center",mb:"2",children:o}),Object(L.jsx)(d.default.Body2,{textAlign:"center",mb:"8",color:"text-subdued",children:r}),Object(L.jsxs)(re.default,{alignItems:"center",space:"3",justifyContent:"flex-end",children:[!i&&Object(L.jsx)(ae.default,le(le({flex:1,lineHeight:"50px",size:"xl",onPress:function(){null==u||u({close:function(){return null==m?void 0:m()}}),null==m||m()}},f),{},{children:null!=(t=null==f?void 0:f.children)?t:j.formatMessage({id:null!=s?s:"action__cancel"})})),!a&&Object(L.jsx)(ae.default,le(le({flex:1,type:"primary",lineHeight:"50px",size:"xl",onPress:function(){null==l||l({onClose:m,close:function(){return null==m?void 0:m()}})}},b),{},{children:null!=(n=null==b?void 0:b.children)?n:j.formatMessage({id:null!=c?c:"action__ok"})}))]})]})},de=n(1616),fe=n(1615);function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var je=function(e){var t=e.address,n=e.onDelete,o=Object(T.useActiveWalletAccount)(),r=o.networkId,a=o.accountId,i=Object(Z.useSingleToken)(r,null!=t?t:"").token,c=Object(T.useTokenBalance)({accountId:a,networkId:r,token:i,fallback:"0"}),s=Object(y.useNavigation)(),l=Object(h.useCallback)((function(e){var t,n;s.navigate(D.ManageTokenModalRoutes.ViewToken,me(me({},e),{},{decimal:e.decimals,source:null!=(t=e.source)?t:"",address:null!=(n=e.address)?n:""}))}),[s]);return i?Object(L.jsxs)(g.default,{onPress:function(){return l(i)},flexDirection:"row",justifyContent:"space-between",p:"8px",borderRadius:"12px",alignItems:"center",_hover:{bgColor:"surface-hovered"},_pressed:{bgColor:"surface-pressed"},children:[Object(L.jsx)(f.default,{size:8,token:i,showInfo:!0,flex:1,showExtra:!1,description:Object(L.jsx)(X.FormatBalance,{balance:c,suffix:i.symbol,formatOptions:{fixed:6}})}),Object(L.jsx)(Q.default,{name:"TrashMini",type:"plain",circle:!0,onPress:function(){return null==n?void 0:n(i)}})]}):null},Oe=function(e){var t=e.tokens,n=e.showTopsLabel,o=e.onDelete,r=Object(k.default)();return Object(L.jsxs)(u.default,{children:[t.length?Object(L.jsxs)(u.default,{children:[Object(L.jsx)(d.default.Subheading,{px:"8px",color:"text-subdued",children:r.formatMessage({id:"form__my_tokens",defaultMessage:"MY TOKENS"})}),Object(L.jsx)(u.default,{mt:"2",mb:"6",children:t.map((function(e){var t;return Object(h.createElement)(je,me(me({},e),{},{onDelete:o,key:null!=(t=e.address)?t:""}))}))})]}):null,n?Object(L.jsx)(d.default.Subheading,{px:"8px",color:"text-subdued",mb:"2",children:r.formatMessage({id:"form__top_50_tokens",defaultMessage:"TOP 50 TOKENS"})}):null]})},ge=function(e){var t=e.tokens,n=e.showTopsLabel,o=e.keyword,r=e.onChange,a=e.onDelete,i=Object(k.default)();return Object(L.jsxs)(u.default,{children:[Object(L.jsx)(u.default,{px:"8px",mb:"6",children:Object(L.jsx)(J.default,{w:"full",placeholder:i.formatMessage({id:"form__search_tokens",defaultMessage:"Search Tokens"}),value:o,onClear:function(){return r("")},onChangeText:function(e){return r(e)}})}),o?null:Object(L.jsx)(Oe,{tokens:t,onDelete:a,showTopsLabel:n})]})},pe=function(e){var t=e.isLoading,n=e.terms,o=Object(k.default)(),r=Object(y.useNavigation)();return t?Object(L.jsx)(Y.default,{w:"full",h:"20",children:Object(L.jsx)(H.default,{size:"lg"})}):n.length>0?Object(L.jsx)(G.default,{emoji:"\ud83d\udd0d",title:o.formatMessage({id:"content__no_results",defaultMessage:"No Result"}),subTitle:o.formatMessage({id:"content__no_results_desc",defaultMessage:"The token you searched for was not found"}),actionTitle:o.formatMessage({id:"action__add_custom_tokens",defaultMessage:"Add Custom Token"}),handleAction:function(){var e={};42===n.length&&(e.address=n),r.navigate(D.ManageTokenModalRoutes.CustomToken,e)}}):null},he=function(e){var t=e.item,n=Object(k.default)(),o=Object(h.useState)(!1),r=c()(o,2),a=r[0],i=r[1],s=Object(y.useNavigation)(),l=Object(T.useActiveWalletAccount)(),d=l.walletId,b=l.accountId,j=l.networkId,p=Object(T.useAccountTokensOnChain)(j,b),x=Object(T.useAppSelector)((function(e){return e.settings.hideSmallBalance})),v=Object(T.useAppSelector)((function(e){return e.settings.hideRiskTokens})),_=p.some((function(e){return t.tokenIdOnNetwork===e.address&&!e.autoDetected})),I=Object(h.useCallback)(m()((function*(){var e=yield A.default.engine.getVaultSettings(j);if(null!=e&&e.activateTokenRequired)return new Promise((function(e,n){s.navigate(D.ManageTokenModalRoutes.ActivateToken,{walletId:d,accountId:b,networkId:j,tokenId:t.tokenIdOnNetwork,onSuccess:function(){e(!0)},onFailure:function(e){n(e)}})}))})),[d,b,j,t.tokenIdOnNetwork,s]),P=Object(h.useCallback)(m()((function*(){var e={title:n.formatMessage({id:"msg__str_has_been_added_but_is_hidden"},{0:t.symbol}),content:""};if(v&&t.riskLevel&&t.riskLevel>M.TokenRiskLevel.WARN&&(e.content=n.formatMessage({id:"msg__str_has_been_added_but_is_hidden_desc"},{0:t.symbol})),x){var o,r=A.default.serviceToken,a=A.default.servicePrice,i=yield r.getAccountBalanceFromRpc(j,b,[t.tokenIdOnNetwork],!1,(o={},o[t.tokenIdOnNetwork]=t,o)),s=c()(i,1)[0],l=yield a.getSimpleTokenPrice({networkId:j,tokenId:t.tokenIdOnNetwork}),u=Object(te.getTokenValue)({token:t,price:l,balances:s});u&&u.isLessThan(1)&&(e.content=n.formatMessage({id:"msg__token_has_been_added_but_is_hiddendesc_desc"}))}if(e.content)var d,f=(d=me(me({},e),{},{primaryActionTranslationId:"action__show_it",onPrimaryActionPress:function(){null==f||f(),Object(ne.showHomeBalanceSettings)({networkId:j})}}),Object(ee.showOverlay)((function(e){return Object(L.jsx)(ce.BottomSheetSettings,{closeOverlay:e,children:Object(L.jsx)(ue,le(le({},d),{},{onClose:e}))})})))})),[b,x,v,n,t,j]),S=Object(h.useCallback)(m()((function*(){var e=A.default.serviceToken;try{yield I(),yield e.addAccountToken(j,b,t.tokenIdOnNetwork)}catch(o){return w.default.common.error("add token error",o),void $.deviceUtils.showErrorToast(o,"msg__failed_to_add_token")}yield P(),O.default.show({title:n.formatMessage({id:"msg__token_added"})})})),[b,j,n,I,t,P]),C=Object(h.useCallback)(m()((function*(){b&&j&&(i(!0),yield S(),Object(de.notifyIfRiskToken)(t),setTimeout((function(){i(!1)}),1e3))})),[t,b,j,S]),R=Object(h.useCallback)((function(){var e=_?D.ManageTokenModalRoutes.ViewToken:D.ManageTokenModalRoutes.AddToken;s.navigate(e,{name:t.name,symbol:t.symbol,address:t.tokenIdOnNetwork,decimal:t.decimals,logoURI:t.logoURI,source:t.source||"",sendAddress:t.sendAddress,riskLevel:t.riskLevel})}),[s,t,_]),B=Object(h.useMemo)((function(){return _?Object(L.jsx)(u.default,{p:2,children:Object(L.jsx)(K.default,{name:"CheckMini",color:"interactive-disabled"})}):a?Object(L.jsx)(u.default,{p:"2",children:Object(L.jsx)(H.default,{size:"sm"})}):Object(L.jsx)(Q.default,{name:"PlusMini",type:"plain",circle:!0,p:"4",onPromise:C})}),[a,C,_]);return Object(L.jsxs)(g.default,{borderTopRadius:"12px",borderBottomRadius:"12px",flexDirection:"row",justifyContent:"space-between",p:2,alignItems:"center",overflow:"hidden",onPress:R,_hover:{bgColor:"surface-hovered"},_pressed:{bgColor:"surface-pressed"},children:[Object(L.jsx)(u.default,{display:"flex",alignItems:"center",flexDirection:"row",flex:1,children:Object(L.jsx)(f.default,{size:8,showInfo:!0,token:t,showExtra:!0,nameProps:{color:_?"text-disabled":"text-default"},descProps:{color:_?"text-disabled":"text-subdued"},extraProps:{color:_?"text-disabled":"text-subdued"}})}),B]},t.tokenIdOnNetwork)},ye=function(e){var t=e.onRemoveAccountToken,n=Object(k.default)(),o=Object(y.useNavigation)(),r=Object(T.useActiveWalletAccount)(),a=r.network,i=r.accountId,l=r.networkId,u=Object(T.useAccountTokensOnChain)(l,i),d=Object(T.useNetworkTokens)(l),f=Object(h.useMemo)((function(){return u.filter((function(e){return e.address&&!e.autoDetected}))}),[u]),b=Object(h.useState)(""),m=c()(b,2),j=m[0],O=m[1],g=Object(T.useDebounce)(j,500),p=Object(fe.useSearchTokens)(g,j,l,i),x=p.loading,v=p.searchedTokens,M=Object(h.useMemo)((function(){return j?v:d}),[j,v,d]),w=Object(h.useCallback)((function(e){var t=e.item;return Object(L.jsx)(he,{item:t})}),[]);return Object(L.jsx)(s.default,{header:n.formatMessage({id:"title__manage_tokens",defaultMessage:"Manage Tokens"}),height:"560px",headerDescription:null==a?void 0:a.shortName,hidePrimaryAction:!0,onSecondaryActionPress:function(){o.navigate(D.ManageTokenModalRoutes.CustomToken)},secondaryActionProps:{type:"basic",leftIconName:"PlusOutline"},secondaryActionTranslationId:"action__add_custom_tokens",flatListProps:{data:M,renderItem:w,keyExtractor:function(e){var t=e;return""+Object(_.getBalanceKey)(t)},showsVerticalScrollIndicator:!1,ListEmptyComponent:Object(L.jsx)(pe,{isLoading:x,terms:g}),ListHeaderComponent:Object(L.jsx)(ge,{showTopsLabel:d.length>0,tokens:f,keyword:j,onChange:O,onDelete:t}),mx:"-8px"}})},ke=function(){var e=Object(k.default)(),t=Object(T.useActiveWalletAccount)(),n=t.accountId,o=t.networkId,r=Object(h.useCallback)((function(t){t&&Object(ee.showOverlay)((function(r){return Object(L.jsx)(q.default,{visible:!0,onClose:r,footerButtonProps:{primaryActionTranslationId:"action__delete",primaryActionProps:{type:"destructive",onPromise:function(){var e=m()((function*(){var e;if(n&&t)return A.default.serviceToken.deleteAccountToken({accountId:n,networkId:o,tokenId:t.id,address:null!=(e=t.address)?e:""}).finally((function(){r()}))}));return function(){return e.apply(this,arguments)}}()}},contentProps:{iconType:"danger",title:e.formatMessage({id:"modal__delete_this_token",defaultMessage:"Delete this token?"}),content:e.formatMessage({id:"modal__delete_this_token_desc",defaultMessage:"{token} will be removed from my tokens"},{token:t.name})}})}))}),[n,e,o]);return Object(L.jsx)(ye,{onRemoveAccountToken:r})},xe=n(175),ve=n(106),_e=n(4517),Me=n.n(_e),we=Object(h.memo)((function(){var e,t,n=Object(k.default)(),o=Object(T.useNavigation)(),r=Object(y.useRoute)(),a=Object(fe.useTokenSourceList)(),i=a.loading,c=a.data,l=r.params,b=l.token,m=l.token.source,j=Object(fe.useTokenSecurityInfo)(b.networkId,null!=(e=null!=(t=b.tokenIdOnNetwork)?t:b.address)?e:""),O=j.loading,x=j.data.safe,v=Object(h.useCallback)((function(){o.navigate(D.RootRoutes.Modal,{screen:D.ModalRoutes.ManageToken,params:{screen:D.ManageTokenModalRoutes.TokenRiskDetail,params:{token:b}}})}),[o,b]),_=Object(h.useMemo)((function(){var e;return Object(L.jsxs)(u.default,{flexDirection:"column",alignItems:"center",mb:4,children:[Object(L.jsx)(K.default,{size:44,name:"BadgeCheckMini",color:"icon-success"}),Object(L.jsx)(p.default,{typography:"DisplayXLarge",mt:3,mb:"1",children:n.formatMessage({id:"title__verified_token"})}),Object(L.jsx)(p.default,{typography:"Body1",mt:2,children:n.formatMessage({id:"title__verified_token_desc"})}),0===(null==x?void 0:x.length)?null:Object(L.jsx)(g.default,{w:"full",onPress:v,children:Object(L.jsxs)(re.default,{mt:"9",w:"full",alignItems:"center",children:[Object(L.jsx)(ve.default,{size:"40px",source:Me.a}),Object(L.jsxs)(oe.default,{flex:"1",ml:"3",children:[Object(L.jsx)(d.default.Body1Strong,{mb:"1",children:n.formatMessage({id:"form__no_risks"})}),O?Object(L.jsx)(xe.default,{shape:"Body2"}):Object(L.jsx)(d.default.Body2,{color:"text-subdued",children:n.formatMessage({id:"form__no_risks_desc"},{0:null!=(e=null==x?void 0:x.length)?e:0})})]}),Object(L.jsx)(K.default,{name:"ChevronRightMini",color:"icon-subdued",size:20})]})}),Object(L.jsx)(d.default.Subheading,{w:"full",mb:"2",mt:"8",color:"text-subdued",children:n.formatMessage({id:"form__token_lists__uppercase"})})]})}),[n,v,x,O]),M=Object(h.useCallback)((function(e){var t=e.item,n=null==m?void 0:m.includes(t.name);return Object(L.jsxs)(u.default,{flexDirection:"row",alignItems:"center",mb:4,children:[Object(L.jsx)(f.default,{flex:1,showInfo:!0,token:{logoURI:t.logo,name:t.name},description:t.count+" tokens",size:8,nameProps:{maxW:56,numberOfLines:2,color:n?"text-default":"text-disabled"},descProps:{maxW:"56",numberOfLines:1,color:n?"text-subdued":"text-disabled"}}),n&&Object(L.jsx)(K.default,{size:16,name:"BadgeCheckMini",color:"icon-success"})]})}),[m]);return i||O?Object(L.jsx)(s.default,{height:"560px",hidePrimaryAction:!0,hideSecondaryAction:!0,footer:null,children:Object(L.jsx)(Y.default,{flex:1,children:Object(L.jsx)(H.default,{size:"lg"})})}):Object(L.jsx)(s.default,{height:"560px",hidePrimaryAction:!0,hideSecondaryAction:!0,footer:null,flatListProps:{data:c.sort((function(e){return null!=m&&m.includes(e.name)?-1:1})),renderItem:M,keyExtractor:function(e){return e.name},showsVerticalScrollIndicator:!1,ListHeaderComponent:_}})})),Ae=n(214),Te=function(e){var t=e.password,n=e.accountId,o=e.networkId,r=e.tokenId,a=e.onSuccess,i=e.onFailure,c=Object(y.useNavigation)();return Object(h.useEffect)((function(){n&&o&&r&&m()((function*(){try{(yield A.default.engine.activateToken(t,n,o,r))?null==a||a():null==i||i()}catch(e){w.default.sendTx.error(e),null==i||i(e)}c.goBack()}))()}),[]),Object(L.jsx)(Y.default,{h:"full",w:"full",children:Object(L.jsx)(H.default,{size:"lg"})})},Ie=function(e){var t=e.route,n=Object(k.default)(),o=t.params||{},r=o.walletId,a=o.accountId,i=o.networkId,c=o.tokenId,l=o.onSuccess,u=o.onFailure;return Object(L.jsx)(s.default,{header:n.formatMessage({id:"action__add_custom_tokens",defaultMessage:"Add Token"}),headerDescription:n.formatMessage({id:"msg__aptos_first_activation_token"}),hideSecondaryAction:!0,hidePrimaryAction:!0,footer:null,children:Object(L.jsx)(Ae.default,{walletId:r,skipSavePassword:!0,field:Ae.ValidationFields.Payment,children:function(e){return Object(L.jsx)(Te,{accountId:a,networkId:i,tokenId:c,password:e,onSuccess:l,onFailure:u})}})})},Pe=n(262),Se=n(1090),Ce=n(100),De=n(504),Re=n(5226),Be=n.n(Re),Ne=n(302),Le=function(){var e=Object(k.default)(),t=Object(ie.default)(),n=Object(y.useRoute)().params.token,o=n.networkId,r=n.address,a=Object(fe.useTokenSecurityInfo)(o,r),i=a.loading,c=a.data,l=c.safe,u=c.danger,f=c.hasSecurity,b=c.warn,m=Object(h.useMemo)((function(){return!f||(!(null!=u&&u.length)||!(null!=b&&b.length))}),[u,b,f]),j=Object(h.useCallback)((function(){Object(Ne.openUrl)("https://gopluslabs.io/")}),[]),O=Object(h.useMemo)((function(){var t;return f?null!=u&&u.length?Object(L.jsxs)(Y.default,{mt:"6",mb:"8",children:[Object(L.jsx)(K.default,{name:"ExclamationTriangleMini",color:"icon-warning",size:44}),Object(L.jsx)(d.default.DisplayLarge,{mt:"2",children:e.formatMessage({id:"title__possible_risky_token"})})]}):Object(L.jsxs)(Y.default,{mt:"6",mb:"8",children:[Object(L.jsx)(K.default,{name:"ExclamationCircleMini",color:"icon-subdued",size:44}),Object(L.jsx)(d.default.DisplayLarge,{mt:"2",children:e.formatMessage({id:"title__token_that_needs_caution"})})]}):Object(L.jsxs)(Y.default,{mt:"6",mb:"8",children:[Object(L.jsx)(ve.default,{size:"56px",source:Me.a,mb:"2"}),Object(L.jsx)(d.default.DisplayLarge,{mb:"2",children:e.formatMessage({id:"form__no_risks"})}),Object(L.jsx)(d.default.Body1,{color:"text-subdued",children:e.formatMessage({id:"form__no_risks_desc"},{0:null!=(t=null==l?void 0:l.length)?t:0})})]})}),[f,e,l,u]),p=Object(h.useMemo)((function(){return Object(L.jsxs)(oe.default,{pb:t.bottom+"px",mt:"8",children:[Object(L.jsx)(Ce.default,{}),Object(L.jsx)(g.default,{onPress:j,children:Object(L.jsxs)(re.default,{alignItems:"center",justifyContent:"center",mt:"4",children:[Object(L.jsx)(d.default.Body2,{color:"text-subdued",children:"Powered By"}),Object(L.jsx)(ve.default,{size:"20px",source:Be.a,ml:"2",mr:"1"}),Object(L.jsx)(d.default.Body2,{children:"Go Plus"})]})})]})}),[t.bottom,j]),x=Object(h.useCallback)((function(t){var n,o,r,a,i,c,s,l,u,m,j,O,g,p,h,y=t.item,k=b.includes(y),x=null==(n=De.tokenSecurityRiskItems[y])?void 0:n[f?"danger":"safe"],v=null==(o=De.tokenSecurityRiskItems[y])?void 0:o.warn;if(k&&v&&(x=v),!x)return null;var _=Object(L.jsx)(K.default,{size:20,name:"BadgeCheckMini",color:"icon-success"});return f&&(_=k?Object(L.jsx)(K.default,{size:20,name:"ExclamationCircleMini",color:"icon-subdued"}):Object(L.jsx)(K.default,{size:20,name:"ExclamationTriangleMini",color:"icon-warning"})),Object(L.jsxs)(re.default,{mt:f?4:0,mb:f?0:4,alignItems:"flex-start",w:"full",children:[_,Object(L.jsxs)(oe.default,{ml:"3",flex:"1",children:[Object(L.jsx)(d.default.Body1Strong,{children:e.formatMessage({id:"string"===typeof(null==(r=x)?void 0:r[0])?null==(a=x)?void 0:a[0]:null==(i=x)||null==(c=i[0])?void 0:c[0]},null!=(s=null==(l=x)||null==(u=l[0])?void 0:u[1])?s:{})}),Object(L.jsx)(d.default.Body2,{color:"text-subdued",children:e.formatMessage({id:"string"===typeof(null==(m=x)?void 0:m[1])?null==(j=x)?void 0:j[1]:null==(O=x)?void 0:O[1][0]},null!=(g=null==(p=x)||null==(h=p[1])?void 0:h[1])?g:{})})]})]})}),[e,f,b]),v=Object(h.useMemo)((function(){var t,n;return[{headerProps:{title:e.formatMessage({id:"form__str_risky_item_uppercase"},{0:null!=(t=null==u?void 0:u.length)?t:0})},data:u},{headerProps:{title:e.formatMessage({id:"form__str_attention_item_uppercase"},{0:null!=(n=null==b?void 0:b.length)?n:0})},data:b}]}),[u,e,b]),_=Object(h.useMemo)((function(){return m?f?null!=u&&u.length?u:b:l:v}),[m,v,l,b,u,f]);return i?Object(L.jsx)(s.default,{height:"560px",hidePrimaryAction:!0,hideSecondaryAction:!0,footer:null,children:Object(L.jsx)(Y.default,{flex:1,children:Object(L.jsx)(H.default,{size:"lg"})})}):Object(L.jsx)(s.default,{height:"560px",hidePrimaryAction:!0,hideSecondaryAction:!0,footer:null,children:m?Object(L.jsx)(Pe.default,{ListHeaderComponent:function(){return O},data:_,renderItem:x,keyExtractor:function(e,t){return e+"_"+t},ListFooterComponent:function(){return p},paddingX:"2"}):Object(L.jsx)(Se.default,{ListHeaderComponent:function(){return O},stickySectionHeadersEnabled:!1,sections:_,renderItem:x,keyExtractor:function(e,t){return e+"_"+t},ListFooterComponent:function(){return p},paddingX:"2"})})},Ee=(n(1348),n(21)),ze=n.n(Ee),We=n(301),Ve=n(468),Fe=(n(24),n(2440)),Ue=n(1584),qe=n(86),Ke=n(4139),Ge=n(4293);function Ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function He(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Je=n(475),Qe=n(234);function Xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}var Ze=Object(Qe.default)(),$e=[{name:D.ManageTokenModalRoutes.Listing,component:ke},{name:D.ManageTokenModalRoutes.AddToken,component:F},{name:D.ManageTokenModalRoutes.ActivateToken,component:Ie},{name:D.ManageTokenModalRoutes.ViewToken,component:V},{name:D.ManageTokenModalRoutes.CustomToken,component:U.default},{name:D.ManageTokenModalRoutes.VerifiedToken,component:we},{name:D.ManageTokenModalRoutes.PriceAlertList,component:function(){var e=Object(k.default)(),t=Object(Ue.default)().themeVariant,n=Object(h.useState)(!1),o=c()(n,2),r=o[0],a=o[1],i=Object(h.useState)([]),l=c()(i,2),d=l[0],f=l[1],b=Object(y.useRoute)(),j=Object(I.useSettings)().pushNotification,O=b.params,g=O.token,p=O.price,x=Object(y.useNavigation)(),v=A.default.serviceNotification,_=A.default.dispatch,M=Object(h.useMemo)((function(){return d.length>=50}),[d.length]),T=Object(h.useCallback)(m()((function*(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];try{if(!e)return;a(!0);var t=yield v.queryPriceAlertList(g.coingeckoId);f(t)}catch(n){w.default.common.error("queryPriceAlertList failed",n instanceof Error?null==n?void 0:n.message:n)}setTimeout((function(){a(!1)}),100)})),[g,v]),P=Object(h.useCallback)((function(){null!=j&&j.pushEnable&&j.priceAlertEnable||_(Object(qe.setPushNotificationConfig)({pushEnable:!0,priceAlertEnable:!0})),x.navigate(D.ManageTokenModalRoutes.PriceAlertAdd,{price:p,token:g,alerts:d})}),[j,_,x,g,d,p]);Object(y.useFocusEffect)(Object(h.useCallback)((function(){var e=!0;return T(e),function(){e=!1}}),[T]));var S=Object(h.useMemo)((function(){return Object(L.jsx)(u.default,{w:"full",mt:"2",mb:6,borderRadius:"12",bg:"surface-default",borderWidth:"light"===t?1:void 0,borderColor:"border-subdued",children:d.map((function(e,t){return Object(L.jsx)(Ge.default,He({alert:e,divider:t!==d.length-1,onRemove:function(){return T(!0)}},g),""+e.price+e.currency)}))})}),[d,t,g,T]);return Object(h.useMemo)((function(){var t={header:e.formatMessage({id:"form__price_alert"}),height:"560px",headerDescription:g.symbol,hideSecondaryAction:!0,onPrimaryActionPress:P,primaryActionProps:{type:M?"basic":"primary",leftIconName:"PlusOutline",disabled:M},primaryActionTranslationId:"action__add_alert"};return!d.length||r?Object(L.jsx)(s.default,He(He({},t),{},{children:Object(L.jsx)(Ke.ListEmptyComponent,{isLoading:r,symbol:g.symbol})})):Object(L.jsx)(s.default,He(He({},t),{},{scrollViewProps:{children:S}}))}),[S,e,d,M,r,P,g.symbol])}},{name:D.ManageTokenModalRoutes.PriceAlertAdd,component:function(){var e,t=Object(k.default)(),n=Object(h.useState)(!1),o=c()(n,2),r=o[0],i=o[1],l=Object(y.useRoute)().params,f=l.token,b=l.alerts,j=l.price,p=(Object(We.default)().height,Object(a.default)()),x=Object(I.useSettings)().pushNotification,v=Object(y.useNavigation)(),_=Object(Z.useCurrentNetworkTokenInfoByCoingeckoId)(null!=(e=f.coingeckoId)?e:""),M=Object(I.useSettings)().selectedFiatMoneySymbol,T=A.default.serviceNotification,P=Object(h.useMemo)((function(){return Object(te.getSuggestedDecimals)(+j)}),[j]),S=Object(h.useCallback)((function(e,n){return t.formatNumber(+(e||0),{currencyDisplay:"narrowSymbol",style:(null==n?void 0:n.style)||"currency",currency:M,minimumFractionDigits:2,maximumFractionDigits:P,useGrouping:(null==n?void 0:n.useGrouping)||!1})}),[t,M,P]),C=Object(h.useState)(""),D=c()(C,2),R=D[0],B=D[1],N=r||!R,E=Object(h.useMemo)((function(){return S(j,{style:"decimal",useGrouping:!1})}),[S,j]),z=Object(h.useMemo)((function(){return Object(L.jsx)(g.default,{onPress:function(){B(E)},w:"100%",flexDirection:"row",children:Object(L.jsx)(d.default.Body1Strong,{textAlign:"center",flex:"1",children:t.formatMessage({id:"content__current_price_str"},{0:S(j,{style:"currency",useGrouping:!0})})})})}),[S,t,j,E]),W=Object(h.useCallback)(m()((function*(){var e=S(new ze.a(R).toFixed(P),{style:"decimal",useGrouping:!1}),n=M;if(b.find((function(t){return t.price===e&&t.currency===n})))return null!=v.canGoBack&&v.canGoBack()&&v.goBack(),void O.default.show({title:t.formatMessage({id:"msg__alert_already_exists"})});i(!0);try{var o,r,a;yield T.addPriceAlertConfig({symbol:null!=(o=f.symbol)?o:null==_?void 0:_.symbol,logoURI:null!=(r=f.logoURI)?r:null==_?void 0:_.logoURI,operator:new ze.a(R).isGreaterThanOrEqualTo(j)?Ve.PriceAlertOperator.greater:Ve.PriceAlertOperator.less,price:e,currency:M,coingeckoId:null!=(a=f.coingeckoId)?a:""})}catch(c){w.default.common.error("changePriceAlertConfig",c instanceof Error?null==c?void 0:c.message:c)}setTimeout((function(){i(!1),null!=v.canGoBack&&v.canGoBack()&&v.goBack()}),100)})),[t,b,P,v,M,R,f,_,j,T,S]);return Object(h.useEffect)((function(){null!=x&&x.pushEnable||!v.canGoBack()||v.goBack()}),[null==x?void 0:x.pushEnable,v]),Object(L.jsx)(s.default,{header:t.formatMessage({id:"form__price_alert"}),height:"560px",headerDescription:f.symbol,hideSecondaryAction:!0,onPrimaryActionPress:W,primaryActionProps:{type:N?"basic":"primary",leftIconName:"PlusOutline",isLoading:r,disabled:N},primaryActionTranslationId:"action__add_alert",children:Object(L.jsxs)(u.default,{flex:1,flexDirection:"column",style:{userSelect:"none"},children:[Object(L.jsx)(u.default,{py:p?4:void 0,my:6,flex:1,justifyContent:"center",children:Object(L.jsx)(Fe.PreSendAmountPreview,{title:t.formatMessage({id:"content__when_price_reaches"}),desc:z,text:R,placeholder:E,onChangeText:function(e){B(e)}})}),Object(L.jsx)(u.default,{mt:"auto",children:!1})]})})}},{name:D.ManageTokenModalRoutes.TokenRiskDetail,component:Le}];t.default=function(){var e=Object(a.default)();return Object(L.jsx)(Ze.Navigator,{screenOptions:function(t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({headerShown:!1},Object(Je.buildModalStackNavigatorOptions)({isVerticalLayout:e,navInfo:t}))},children:$e.map((function(e){return Object(L.jsx)(Ze.Screen,{name:e.name,component:e.component},e.name)}))})}}}]);