(this.webpackJsonp=this.webpackJsonp||[]).push([[82],{4272:function(e,t,n){"use strict";n.r(t);var r=n(3992);n.d(t,"default",(function(){return r.RecyclerListView})),n.d(t,"DataProvider",(function(){return r.DataProvider})),n.d(t,"LayoutProvider",(function(){return r.LayoutProvider}))},5311:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n.n(r),o=n(50),l=n(569),u=n(57),i=n(76),c=n(4),s=n.n(c),d=n(1),f=n(44),j=n(1057),b=n(214),h=n(0),m=function(){var e=Object(f.useNavigation)(),t=Object(f.useRoute)().params,n=t.requestId,r=t.onSuccess,a=t.onCancel,o=t.field,c=Object(d.useState)(""),m=s()(c,2),p=m[0],O=m[1],x=function(t){var a=t.password;return Object(d.useEffect)((function(){a&&(p||(O(a),setTimeout((function(){r(a,n),e.goBack()}),500)))}),[a]),Object(h.jsx)(j.default,{w:"full",h:"full",children:Object(h.jsx)(i.default,{size:"lg"})})};return Object(h.jsx)(l.default,{style:{zIndex:1e4},children:Object(h.jsx)(u.default,{footer:null,onModalClose:function(){p||null==a||a()},children:Object(h.jsx)(b.default,{walletId:null,field:o,children:function(e){return Object(h.jsx)(x,{password:e})}})})})},p=n(20),O=n(1132),x=n.n(O),g=n(64),v=n(51),y=n(12),w=n(4272),M=n(473),P=n(1004),_=Object(d.memo)((function(e){var t=e.color,n=e.onPress;return Object(h.jsx)(y.default,{flexDirection:"row",height:"40px",justifyContent:"space-around",px:"24px",marginY:"24px",children:P.colors.map((function(e){var r=t===e;return Object(h.jsx)(g.default,{onPress:function(){n(e)},children:function(t){var n=t.isHovered;return Object(h.jsx)(v.default,{width:"40px",height:"40px",p:"2px",borderRadius:"full",bgColor:r?e:n?"border-hovered":void 0,children:Object(h.jsx)(y.default,{flex:1,alignSelf:"stretch",bgColor:e,borderRadius:"full",borderColor:"background-default",borderWidth:"4px"})})}},"color"+e)}))})}));_.displayName="ColorSelecter";var R=function(){var e=Object(d.useRef)(),t=Object(f.useNavigation)(),n=Object(f.useRoute)().params,r=n.avatar,a=n.onDone,o=Object(d.useState)(r.bgColor),l=s()(o,2),i=l[0],c=l[1],j=Object(d.useState)(r.emoji),b=s()(j,2),m=b[0],O=b[1],v=Object(d.useState)(0),R=s()(v,2),C=R[0],S=R[1],I=C-48,W=Math.floor(I/48),k=Object(d.useMemo)((function(){var e=x()(P.emojiList,W);return new w.DataProvider((function(e,t){return e!==t})).cloneWithRows(e)}),[W]),D=Object(d.useMemo)((function(){return new w.LayoutProvider((function(){return"emoji"}),(function(e,t){t.width=I,t.height=48}))}),[I,48]),A=Object(d.useCallback)((function(e,t){var n=x()(t,W);return Object(h.jsx)(y.default,{height:"full",children:n.map((function(e,t){return Object(h.jsx)(y.default,{flexDirection:"row",justifyContent:"space-between",width:I+"px",height:"48px",children:e.map((function(e,n){return Object(h.jsx)(g.default,{onPress:function(){O(e)},borderRadius:"12px",_hover:{bg:"surface-hovered"},_pressed:{bg:"surface-pressed"},children:Object(h.jsx)(y.default,{alignItems:"center",justifyContent:"center",width:"48px",height:"48px",children:Object(h.jsx)(p.default,{typography:"DisplayXLarge",children:e})})},"rows"+t+" "+n)}))},"rows"+t)}))})}),[48,W,I]);return Object(h.jsx)(u.default,{size:"xs",height:"562px",header:"",primaryActionTranslationId:"action__done",hideSecondaryAction:!0,staticChildrenProps:{flex:1},primaryActionProps:{onPress:function(){a&&a({emoji:m,bgColor:i}),t.goBack()}},children:Object(h.jsxs)(y.default,{flex:1,children:[Object(h.jsx)(y.default,{alignItems:"center",children:Object(h.jsx)(M.default,{avatar:{emoji:m,bgColor:i},walletImage:"hd",size:"xl"})}),Object(h.jsx)(_,{color:i,onPress:c}),Object(h.jsx)(y.default,{onLayout:function(e){C!==e.nativeEvent.layout.width&&S(e.nativeEvent.layout.width)},flex:1,ref:e,borderTopLeftRadius:"24px",borderTopRadius:"24px",bgColor:"surface-subdued",children:C>0&&Object(h.jsx)(y.default,{flex:1,children:Object(h.jsx)(w.default,{dataProvider:k,layoutProvider:D,rowRenderer:A,renderAheadOffset:300,renderAheadStep:100,style:{padding:24}})})})]})})},C=n(225),S=n(54),I=n(47),W=n(1355),k=n(40),D=n(48),A=n(2),L=n.n(A),z=n(126),E=n(88),N=n(17),T=n(45),B=n(16),V=n(86),q=function(){var e,t,n,r=Object(E.default)(),a=Object(f.useNavigation)(),o=Object(f.useRoute)().params.walletId,l=N.default.engine,i=N.default.dispatch,c=N.default.serviceCloudBackup,j=N.default.serviceAccount,b=Object(T.useRuntime)().wallets,m=null!=(e=b.find((function(e){return e.id===o})))?e:null,p=Object(d.useState)(!1),O=s()(p,2),x=O[0],w=O[1],_=Object(d.useState)(null!=(t=null==m?void 0:m.avatar)?t:P.defaultAvatar),R=s()(_,2),A=R[0],q=R[1],H=Object(z.default)({defaultValues:{name:""}}),J=H.control,F=H.handleSubmit,X=H.setError,Y=F(function(){var e=L()((function*(e){w(!0);var t,n=""===e.name?null==m?void 0:m.name:e.name;if(b.find((function(e){return e.name===n&&e.name!==(null==m?void 0:m.name)})))return X("name",{message:r.formatMessage({id:"form__account_name_invalid_exists"})}),void w(!1);(yield l.setWalletNameAndAvatar(o,{name:n,avatar:A}))?(c.requestBackup(),yield j.initWallets(),setTimeout((function(){return i(Object(V.setRefreshTS)())})),D.default.show({title:r.formatMessage({id:"msg__change_saved"})}),null==(t=a.getParent())||t.goBack()):X("name",{message:r.formatMessage({id:"msg__unknown_error"})});w(!1)}));return function(t){return e.apply(this,arguments)}}()),G=Object(d.useMemo)((function(){return Object(h.jsx)(v.default,{children:Object(h.jsx)(g.default,{onPress:function(){a.navigate(B.RootRoutes.Modal,{screen:B.ModalRoutes.ManagerWallet,params:{screen:B.ManagerWalletModalRoutes.ManagerWalletModifyEmojiModal,params:{avatar:A,onDone:function(e){q((function(){return e}))}}}})},children:function(e){var t=e.isHovered;return Object(h.jsxs)(W.default,{width:"56px",height:"56px",children:[Object(h.jsx)(y.default,{width:"full",height:"full",justifyContent:"center",alignItems:"center",children:Object(h.jsx)(M.default,{avatar:A,walletImage:"hd",size:"xl"})}),Object(h.jsx)(y.default,{size:6,justifyContent:"center",alignItems:"center",borderWidth:2,bg:t?"surface-hovered":"surface-neutral-default",borderColor:"surface-subdued",borderRadius:"full",right:"-12px",bottom:"-12px",children:Object(h.jsx)(k.default,{name:"PencilMini",size:16})})]})}})})}),[A,a]);return Object(h.jsx)(u.default,{header:r.formatMessage({id:"modal__edit_wallet"}),footer:null,children:Object(h.jsxs)(C.default,{px:{base:4,md:0},children:[G,Object(h.jsxs)(I.default,{mt:"6",children:[Object(h.jsx)(I.default.Item,{name:"name",defaultValue:"",control:J,rules:{maxLength:{value:24,message:r.formatMessage({id:"form__account_name_invalid_characters_limit"},{0:"24"})}},children:Object(h.jsx)(I.default.Input,{size:"xl",autoFocus:!0,placeholder:null!=(n=null==m?void 0:m.name)?n:""})}),Object(h.jsx)(S.default,{type:"primary",size:"xl",isLoading:x,runAfterInteractions:!0,onPress:Y,children:r.formatMessage({id:"action__done"})})]})]})})},H=n(475),J=n(234);function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var X=Object(J.default)(),Y=[{name:B.ManagerWalletModalRoutes.ManagerWalletModifyNameModal,component:q},{name:B.ManagerWalletModalRoutes.ManagerWalletAuthorityVerifyModal,component:m},{name:B.ManagerWalletModalRoutes.ManagerWalletModifyEmojiModal,component:R}];t.default=function(){var e=Object(o.default)();return Object(h.jsx)(X.Navigator,{screenOptions:function(t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({headerShown:!1},Object(H.buildModalStackNavigatorOptions)({isVerticalLayout:e,navInfo:t}))},children:Y.map((function(e){return Object(h.jsx)(X.Screen,{name:e.name,component:e.component},e.name)}))})}}}]);