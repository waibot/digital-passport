(this.webpackJsonp=this.webpackJsonp||[]).push([[81],{4302:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAfCAMAAACmqq93AAAAUVBMVEUAAAAMDAwLCwv6+vr+/v79/f339/f6+vr7+/vu7u7Hx8f////v7+/6+vrh4eH////7+/v8/Pze3t7+/v78/Pz5+fnf39/////39/empqb///+KJeaPAAAAGnRSTlMABgqj4KGkk4JFKfBmYiTfwXET0MKyNzAiGkjwtncAAACUSURBVDjL5dFLDsIwDEXRxPknDaXl7/0vlCAxaC2ZvjnX0yNZls1/t+K0w/IZYDqjdA2MUVs8H9Gy5JyTazxy9hec+dsRzcwgXRilJw/Tzii1V5xeJE0q9ZJOOK0GpWfSKDV0v7kLGUmjNuylr/qvpCTwq7eXur633e2FNPlIwTkXx7gY01QHHFLL0jYBpR2R/bR1b4y2G5MTsa3dAAAAAElFTkSuQmCC"},4318:function(e,t,r){"use strict";r.r(t),r.d(t,"useOpenProtocolUrl",(function(){return G})),r.d(t,"OverviewDefiProtocol",(function(){return q}));var o=r(570),n=r(4),l=r.n(n),c=r(20),u=r(50),a=r(109),d=r(63),i=r(27),s=r(12),b=r(106),j=r(1),f=r(21),p=r.n(f),O=r(88),x=r(4302),m=r.n(x),v=r(868),h=r(125),y=r(25),g=r(203),w=r(302),A=r(99),k=r(64),C=r(40),I=r(82),_=r(41),P=r(121),T=r(1089),B=r(0),N=function(e){var t=e.icon,r=e.name,o=e.rate,n=e.desc,l=e.extra,a=e.toggle,i=e.collapsed,s=e.onOpenDapp,b=Object(u.default)(),f=Object(j.useMemo)((function(){return Object(B.jsx)(T.OverviewBadge,{rate:o})}),[o]);return b?Object(B.jsxs)(d.default,{px:4,py:4,alignItems:"center",bg:"surface-subdued",borderTopRadius:"12px",children:[Object(B.jsxs)(_.default,{w:"full",mb:"2",children:[Object(B.jsx)(_.default,{alignItems:"center",flex:"1",justifyContent:"space-around",children:Object(B.jsxs)(_.default,{flex:"1",children:[Object(B.jsx)(P.TokenIcon,{size:6,token:{logoURI:t,name:r}}),Object(B.jsx)(c.default,{onPress:s,typography:"Body1Strong",ml:"2",children:r}),o.isNaN()?null:f]})}),Object(B.jsx)(I.default,{type:"plain",onPress:a,name:i?"ChevronDownMini":"ChevronUpMini"})]}),Object(B.jsxs)(d.default,{w:"full",children:[n,l]})]}):Object(B.jsxs)(_.default,{px:6,py:3,alignItems:"center",bg:"surface-subdued",borderTopRadius:"12px",children:[Object(B.jsx)(_.default,{alignItems:"center",flex:"1",justifyContent:"space-around",children:Object(B.jsxs)(_.default,{flex:"1",children:[Object(B.jsx)(P.TokenIcon,{size:8,token:{logoURI:t,name:r}}),Object(B.jsx)(c.default,{typography:"Heading",ml:"2",onPress:s,children:r}),o.isNaN()?null:f]})}),Object(B.jsx)(k.default,{onPress:a,children:Object(B.jsxs)(_.default,{alignItems:"center",children:[Object(B.jsxs)(d.default,{children:[n,l]}),i?Object(B.jsx)(C.default,{name:"ChevronDownMini",size:20}):Object(B.jsx)(C.default,{name:"ChevronUpMini",size:20})]})})]})},S=r(316),M=r.n(S),V=r(3),D=r.n(V),U=r(1659),R=r.n(U);function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach((function(t){D()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var E=function(e){var t,r=e.pool,o=e.tokenKey,n=Object(u.default)();return Object(B.jsx)(d.default,{children:null==r||null==(t=r[o])?void 0:t.map((function(e,t){var r,o;return Object(B.jsxs)(_.default,{alignItems:"center",mt:t>0?"4px":0,flexWrap:"wrap",children:[Object(B.jsx)(P.TokenIcon,{token:e,size:n?5:4,mr:"1"}),Object(B.jsx)(c.default,{typography:{sm:"Body1Strong",md:"Body2Strong"},mr:"1",children:Object(B.jsx)(h.FormatCurrencyNumber,{onlyNumber:!0,value:new p.a(null!=(r=e.balanceParsed)?r:0)})}),Object(B.jsx)(c.default,{typography:{sm:"Body1Strong",md:"Body2Strong"},mx:"1",children:e.symbol}),Object(B.jsx)(i.default.Body2,{color:"text-subdued",children:Object(B.jsx)(h.FormatCurrencyNumber,{value:0,convertValue:new p.a(null!=(o=e.value)?o:0)})})]},e.tokenAddress)}))})},H=function(e){var t=e.pools,r=Object(O.default)(),o=Object(u.default)(),n=Object(j.useCallback)((function(e){return!e.visibleOn||(null==e.visibleOn?void 0:e.visibleOn({pools:t,isVertical:o}))}),[o,t]),l=Object(j.useMemo)((function(){var e,t,r=[{dataIndex:"supplyTokens",header:"form__pool_uppercase",render:function(e){return Object(B.jsx)(E,F(F({},e),{},{tokenKey:"supplyTokens"}))},visibleOn:function(e){return e.pools.some((function(e){var t;return(null==(t=e.supplyTokens)?void 0:t.length)>0}))}},{dataIndex:"borrowTokens",header:"form__borrowed_uppercase",visibleOn:function(e){return e.pools.some((function(e){var t;return(null==(t=e.borrowTokens)?void 0:t.length)>0}))},render:function(e){return Object(B.jsx)(E,F(F({},e),{},{tokenKey:"borrowTokens"}))}},{dataIndex:"rewardTokens",header:"form__rewards_uppercase",visibleOn:function(e){return e.pools.some((function(e){var t;return(null==(t=e.rewardTokens)?void 0:t.length)>0}))},render:function(e){return Object(B.jsx)(E,F(F({},e),{},{tokenKey:"rewardTokens"}))}}].filter(n),o=[{dataIndex:"lockedInfo",header:"form__unlock_time_uppercase",visibleOn:function(e){return e.pools.some((function(e){var t;return!(null==e||null==(t=e.lockedInfo)||!t.unlockTime)}))},render:function(e){var t,r=e.pool,o=null==r||null==(t=r.lockedInfo)?void 0:t.unlockTime;return"number"!==typeof o?o:Object(B.jsx)(i.default.Body2Strong,{children:R()(1e3*o).format("YYYY/MM/DD HH:mm")})}},{dataIndex:"apr",header:"form__apr_uppercase",visibleOn:function(e){return e.pools.some((function(e){return!!e.apr}))},render:function(e){var t,r=e.pool;return Object(B.jsxs)(i.default.Body2Strong,{children:[Object(B.jsx)(h.FormatCurrencyNumber,{onlyNumber:!0,value:new p.a(null!=(t=r.apr)?t:0)}),"%"]})}},{dataIndex:"poolValue",header:"form__value_uppercase",render:function(e){var t,r=e.pool;return Object(B.jsx)(i.default.Body2Strong,{children:Object(B.jsx)(h.FormatCurrencyNumber,{value:0,convertValue:new p.a(null!=(t=r.poolValue)?t:0)})})},boxProps:{textAlign:"right",justifyContent:"flex-end"}}].filter(n);return 1===(null==r?void 0:r.length)&&null!=r&&null!=(e=r[0])&&e.dataIndex&&r.push({header:"content__price",render:function(e){var r=e.pool;return Object(B.jsx)(d.default,{children:null==r?void 0:r[t].map((function(e){var t;return Object(B.jsx)(i.default.Body2Strong,{children:Object(B.jsx)(h.FormatCurrencyNumber,{value:0,convertValue:new p.a(null!=(t=e.price)?t:0)})},e.tokenAddress)}))})},dataIndex:t=r[0].dataIndex}),r.concat(o)}),[n]),c=Object(j.useMemo)((function(){return t.length}),[t]),a=Object(j.useCallback)((function(e,t){var o=t===c-1;return Object(B.jsx)(d.default,{mb:"4",pb:o?0:4,borderBottomWidth:o?0:"1px",borderBottomColor:"border-subdued",mx:"4",children:l.map((function(t,o){return t.dataIndex&&M()(e[t.dataIndex])?null:Object(B.jsxs)(d.default,{mt:0===o?0:"4",children:[Object(B.jsx)(i.default.Subheading,{mb:"4",color:"text-subdued",children:r.formatMessage({id:t.header})}),t.dataIndex&&!M()(e[t.dataIndex])?t.render({pool:e}):null]},t.header)}))},e.poolCode)}),[l,r,c]),b=Object(j.useCallback)((function(e,r){var o=r===t.length-1;return Object(B.jsx)(_.default,{alignItems:"flex-start",borderBottomColor:"border-subdued",borderBottomWidth:o?0:"1px",mx:"6",py:"4",children:l.map((function(t){var r;return Object(j.createElement)(s.default,F(F({flex:"1"},null!=(r=t.boxProps)?r:{}),{},{key:t.header}),t.render({pool:e}))}))},e.poolCode)}),[t,l]),f=Object(j.useMemo)((function(){return o?null:Object(B.jsx)(_.default,{mx:"6",py:"0",flex:"1",children:l.map((function(e){var t;return Object(B.jsx)(s.default,F(F({flex:"1"},null!=(t=e.boxProps)?t:{}),{},{children:Object(B.jsx)(i.default.Subheading,{color:"text-subdued",children:r.formatMessage({id:e.header})})}),e.header)}))})}),[l,r,o]);return l.length?Object(B.jsxs)(s.default,{children:[f,t.map((function(e,t){return(o?a:b)(e,t)}))]}):null},K=function(e){var t,r,o=e.onConfirm,n=e.protocol,l=e.onClose,c=Object(O.default)(),u=Object(y.useActiveWalletAccount)().network;return Object(B.jsx)(a.default,{visible:!0,onClose:l,contentProps:{icon:Object(B.jsxs)(s.default,{size:"52px",borderRadius:"12px",borderWidth:"1px",borderColor:"border-subdued",overflow:"hidden",position:"relative",children:[Object(B.jsx)(b.default,{size:"full",src:n.protocolIcon,alt:n.protocolName}),Object(B.jsx)(b.default,{source:m.a,w:"35px",h:"25px",position:"absolute",bottom:"0",right:"0",zIndex:"1"}),Object(B.jsx)(b.default,{src:null!=(t=null==u?void 0:u.logoURI)?t:"",w:"12px",h:"12px",position:"absolute",bottom:"2px",right:"2px",zIndex:"2"})]}),title:n.protocolName,contentElement:Object(B.jsxs)(d.default,{children:[Object(B.jsx)(i.default.Body2,{textAlign:"center",children:null!=(r=n.protocolUrl)?r:""}),Object(B.jsx)(i.default.Body2,{mt:"6",textAlign:"center",children:c.formatMessage({id:"content__you_are_about_to_visit_this_site_in_a_dapp_browser_do_you_want_to_continue"})})]})},footerButtonProps:{primaryActionTranslationId:"action__visit",onPrimaryActionPress:function(e){var t=e.onClose;null==t||t(),null==o||o()}}})},G=function(e){var t=Object(y.useNavigation)(),r=Object(u.default)(),o=Object(j.useCallback)((function(){var r;Object(w.openDapp)(null!=(r=null==e?void 0:e.protocolUrl)?r:""),t.canGoBack()&&t.goBack()}),[null==e?void 0:e.protocolUrl,t]);return Object(j.useCallback)((function(){if(null!=e&&e.protocolUrl)return r?void Object(A.showDialog)(Object(B.jsx)(K,{protocol:e,onConfirm:o})):o()}),[e,r,o])},W=function(e){var t=e.poolType,r=Object(u.default)();return Object(B.jsx)(c.default,{ml:r?4:6,my:"4",children:Object(B.jsx)(s.default,{px:"6px",bg:"surface-highlight-default",borderRadius:"6px",children:Object(B.jsx)(i.default.Body2Strong,{color:"text-default",numberOfLines:1,children:t})})})},q=function(e){var t=e._id,r=e.pools,n=e.protocolValue,a=e.protocolName,i=e.protocolIcon,b=e.claimableValue,f=e.showHeader,x=void 0===f||f,m=e.bgColor,w=e.poolCode,A=Object(O.default)(),k=Object(u.default)(),C=Object(g.useCurrentFiatValue)(),I=Object(y.useActiveWalletAccount)(),_=I.networkId,P=I.accountId,T=Object(y.useAccountValues)({networkId:_,accountId:P}),S=G(e),M=Object(j.useMemo)((function(){return new p.a(n).multipliedBy(C).div(T.value).multipliedBy(100)}),[n,T,C]),V=Object(j.useMemo)((function(){return w?r.filter((function(e){return l()(e,2)[1].filter((function(e){return e.poolCode===w})).length>0})).map((function(e){var t=l()(e,2);return[t[0],t[1].filter((function(e){return e.poolCode===w}))]})).map((function(e,r){var o,n=l()(e,2),c=n[0],u=n[1];return Object(B.jsxs)(d.default,{borderTopWidth:0===r?0:"1px",borderTopColor:"divider",children:[Object(B.jsx)(W,{poolType:c,poolName:null==u||null==(o=u[0])?void 0:o.poolName}),Object(B.jsx)(H,{networkId:t.networkId,poolType:c,pools:u})]},c)})):Object(B.jsx)(s.default,{bg:m,children:r.map((function(e,r){var o,n=l()(e,2),c=n[0],u=n[1];return Object(B.jsxs)(d.default,{borderTopWidth:0===r?0:"1px",borderTopColor:"divider",children:[Object(B.jsx)(W,{poolType:c,poolName:null==u||null==(o=u[0])?void 0:o.poolName}),Object(B.jsx)(H,{networkId:t.networkId,poolType:c,pools:u})]},c)}))})}),[m,r,t,w]);return Object(B.jsx)(v.ErrorBoundary,{children:Object(B.jsx)(o.default,{borderRadius:"12px",bg:"surface-default",borderWidth:"1px",borderColor:"border-subdued",mb:"6",value:!1,overflow:"hidden",renderCustomTrigger:function(e,t){return x?Object(B.jsx)(N,{name:a,onOpenDapp:S,rate:M,desc:Object(B.jsx)(c.default,{typography:{md:"Heading",sm:"Body1Strong"},textAlign:k?"left":"right",children:Object(B.jsx)(h.FormatCurrencyNumber,{value:0,convertValue:new p.a(n)})}),extra:+b>0?Object(B.jsx)(c.default,{color:"text-subdued",typography:{md:"Body2Strong",sm:"CaptionStrong"},textAlign:k?"left":"right",children:A.formatMessage({id:"form__claimable_str"},{0:Object(B.jsx)(h.FormatCurrencyNumber,{value:0,convertValue:new p.a(b)})})}):void 0,icon:i,toggle:e,collapsed:t}):null},children:V})})}},5323:function(e,t,r){"use strict";r.r(t);var o=r(50),n=r(3),l=r.n(n),c=r(57),u=r(76),a=r(41),d=r(12),i=r(121),s=r(27),b=r(1),j=r(4318),f=r(44),p=r(21),O=r.n(p),x=r(88),m=r(204),v=r(125),h=r(25),y=r(111),g=r(203),w=r(264),A=r(1089),k=r(0);function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){l()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var _=function(){var e=Object(x.default)(),t=Object(o.default)(),r=Object(f.useRoute)(),n=Object(m.default)(),l=Object(y.useNavigationBack)({fallback:n}),p=r.params,C=p.networkId,_=p.protocolId,P=p.accountId,T=p.poolCode,B=Object(g.useCurrentFiatValue)(),N=Object(h.useAccountValues)({networkId:C,accountId:P}).value,S=Object(h.useAccountPortfolios)({networkId:C,accountId:P,type:w.EOverviewScanTaskType.defi}),M=S.data,V=S.loading,D=Object(b.useMemo)((function(){return null==M?void 0:M.find((function(e){return e._id.protocolId===_}))}),[M,_]),U=Object(b.useMemo)((function(){var e;return new O.a(null!=(e=null==D?void 0:D.protocolValue)?e:0).multipliedBy(B).div(N).multipliedBy(100)}),[null==D?void 0:D.protocolValue,N,B]),R=Object(b.useMemo)((function(){var e;return t?Object(k.jsx)(s.default.Caption,{children:Object(k.jsx)(v.FormatCurrencyNumber,{value:0,convertValue:new O.a(null!=(e=null==D?void 0:D.protocolValue)?e:0)})}):null}),[t,D]),z=Object(b.useMemo)((function(){var e;return t||T?Object(k.jsx)(s.default.Heading,{ml:"3",children:null==D?void 0:D.protocolName}):Object(k.jsxs)(a.default,{alignItems:"center",children:[Object(k.jsx)(i.default,{token:{logoURI:null==D?void 0:D.protocolIcon},size:8}),Object(k.jsx)(s.default.Heading,{ml:"3",children:null==D?void 0:D.protocolName}),Object(k.jsx)(d.default,{mx:"2",my:"auto",w:"1",h:"1",borderRadius:"2px",bg:"text-default"}),Object(k.jsx)(s.default.Heading,{children:Object(k.jsx)(v.FormatCurrencyNumber,{value:0,convertValue:new O.a(null!=(e=null==D?void 0:D.protocolValue)?e:0)})}),U.isGreaterThan(0)?Object(k.jsx)(A.OverviewBadge,{rate:U}):null]})}),[t,D,U,T]),F=Object(j.useOpenProtocolUrl)(D);return V?Object(k.jsx)(c.default,{size:"2xl",hidePrimaryAction:!0,hideSecondaryAction:!0,footer:null,staticChildrenProps:{children:Object(k.jsx)(u.default,{})}}):D?Object(k.jsx)(c.default,{size:"2xl",hidePrimaryAction:!0,hideSecondaryAction:!D.protocolUrl,header:z,footer:D.protocolUrl?void 0:null,headerDescription:R,onSecondaryActionPress:F,secondaryActionProps:{children:e.formatMessage({id:"form__visit_str"},{0:D.protocolName})},scrollViewProps:{children:Object(k.jsx)(j.OverviewDefiProtocol,I(I({},D),{},{showHeader:!1,bgColor:"surface-default",poolCode:T}))}}):(l(),null)},P=r(234),T=Object(P.default)(),B=[{name:w.OverviewModalRoutes.OverviewProtocolDetail,component:_}];t.default=function(){var e=Object(o.default)();return Object(k.jsx)(T.Navigator,{screenOptions:{headerShown:!1,animationEnabled:!!e},children:B.map((function(e){return Object(k.jsx)(T.Screen,{name:e.name,component:e.component},e.name)}))})}}}]);