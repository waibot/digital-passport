(this.webpackJsonp=this.webpackJsonp||[]).push([[83],{3912:function(n,t,e){"use strict";e.r(t),function(n){e.d(t,"VaultBaseChainOnly",(function(){return M})),e.d(t,"VaultBase",(function(){return F}));var r=e(202),i=e.n(r),o=e(3),u=e.n(o),c=e(60),a=e.n(c),s=e(2),d=e.n(s),f=e(6),l=e.n(f),p=e(9),h=e.n(p),v=e(14),y=e.n(v),g=e(7),m=e.n(g),T=e(21),w=e.n(T),x=e(167),A=e.n(x),I=e(11),P=e(19),N=e(24),k=e(68),b=e(23),C=e(182),D=e(947),O=e(52),E=e(1585);function B(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function R(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?B(Object(e),!0).forEach((function(t){u()(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):B(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function S(n){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var e,r=m()(n);if(t){var i=m()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return y()(this,e)}}if(N.default.isExtensionUi)throw new Error("engine/VaultBase is not allowed imported from ui");var M=function(n){h()(e,n);var t=S(e);function e(){return t.apply(this,arguments)}var r=e.prototype;return r.initProvider=function(){var n=d()((function*(){var n=(yield this.getNetwork()).impl;a()(D.IMPL_MAPPINGS[n])||(this.engineProvider=yield this.engine.providerManager.getProvider(this.networkId))}));return function(){return n.apply(this,arguments)}}(),r.proxyJsonRPCCall=function(){var n=d()((function*(n){throw new b.NotImplemented}));return function(t){return n.apply(this,arguments)}}(),r.createClientFromURL=function(n){throw new b.NotImplemented},r.getEthersProvider=function(){var n=d()((function*(){throw new b.NotImplemented}));return function(){return n.apply(this,arguments)}}(),r.getClientEndpointStatus=function(){var n=d()((function*(n){var t=this.createClientFromURL(n),e=performance.now(),r=(yield t.getInfo()).bestBlockNumber;return{responseTime:Math.floor(performance.now()-e),latestBlock:r}}));return function(t){return n.apply(this,arguments)}}(),r.checkRpcBatchSupport=function(){var n=d()((function*(n){throw new b.NotImplemented}));return function(t){return n.apply(this,arguments)}}(),r.getDisplayAddress=function(){var n=d()((function*(n){return Promise.resolve(n)}));return function(t){return n.apply(this,arguments)}}(),r.validateAddress=function(){var n=d()((function*(n){var t=yield this.engineProvider.verifyAddress(n),e=t.normalizedAddress;if(!t.isValid||!e)throw new b.InvalidAddress;return Promise.resolve(e)}));return function(t){return n.apply(this,arguments)}}(),r.validateImportedCredential=function(n){return Promise.resolve(this.settings.importedAccountEnabled&&/^(0x)?[0-9a-zA-Z]{64}$/.test(n))},r.validateWatchingCredential=function(){var n=d()((function*(n){return Promise.resolve(this.settings.watchingAccountEnabled&&(yield this.engineProvider.verifyAddress(n)).isValid)}));return function(t){return n.apply(this,arguments)}}(),r.validateTokenAddress=function(){var n=d()((function*(n){var t=yield this.engineProvider.verifyTokenAddress(n),e=t.normalizedAddress;if(!t.isValid||"undefined"===typeof e)throw new b.InvalidTokenAddress;return Promise.resolve(e)}));return function(t){return n.apply(this,arguments)}}(),r.validateCanCreateNextAccount=function(){var n=d()((function*(n,t){return Promise.resolve(!0)}));return function(t,e){return n.apply(this,arguments)}}(),r.checkAccountExistence=function(){var n=d()((function*(n,t){return Promise.resolve(!0)}));return function(t,e){return n.apply(this,arguments)}}(),r.getBalances=function(){var n=d()((function*(n,t,e){return(yield this.engine.providerManager.getClient(this.networkId)).getBalances(n.map((function(n){var t=n.address,e=n.tokenAddress;return{address:t,coin:R({},"string"===typeof e?{tokenAddress:e}:{})}})))}));return function(t,e,r){return n.apply(this,arguments)}}(),r.getFrozenBalance=function(){var n=d()((function*(n){return 0}));return function(t){return n.apply(this,arguments)}}(),r.fetchBalanceDetails=function(){var n=d()((function*(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.password;return Promise.resolve(void 0)}));return function(){return n.apply(this,arguments)}}(),r.getTransactionStatuses=function(n){return this.engine.providerManager.getTransactionStatuses(this.networkId,n)},r.getTransactionFeeInNative=function(n){return Promise.resolve("")},r.isContractAddress=function(){var n=d()((function*(n){return!1}));return function(t){return n.apply(this,arguments)}}(),r.getAccountNameInfoMap=function(){var n=d()((function*(){var n=yield this.getNetwork();return Object(C.getAccountNameInfoByImpl)(n.impl)}));return function(){return n.apply(this,arguments)}}(),r.canAutoCreateNextAccount=function(){var n=d()((function*(n){return Promise.resolve(!1)}));return function(t){return n.apply(this,arguments)}}(),r.filterAccounts=function(){var n=d()((function*(n){var t=n.accounts;n.networkId;return Promise.resolve(t)}));return function(t){return n.apply(this,arguments)}}(),r.shouldChangeAccountWhenNetworkChanged=function(){var n=d()((function*(n){n.previousNetwork,n.newNetwork,n.activeAccountId;return Promise.resolve({shouldReloadAccountList:!1,shouldChangeActiveAccount:!1})}));return function(t){return n.apply(this,arguments)}}(),r.getAccountNameInfosByImportedOrWatchingCredential=function(){var n=d()((function*(n){return Promise.resolve([])}));return function(t){return n.apply(this,arguments)}}(),r.checkIsUnlimitedAllowance=function(){var n=d()((function*(n){throw new b.NotImplemented}));return function(t){return n.apply(this,arguments)}}(),r.checkIsApprovedForAll=function(){var n=d()((function*(n){throw new b.NotImplemented}));return function(t){return n.apply(this,arguments)}}(),r.checkIsBatchTransfer=function(){var n=d()((function*(n){throw new b.NotImplemented}));return function(t){return n.apply(this,arguments)}}(),r.getFeePricePerUnit=function(){var n=d()((function*(){throw new b.NotImplemented}));return function(){return n.apply(this,arguments)}}(),r.fetchRpcChainId=function(){var n=d()((function*(n){return null}));return function(t){return n.apply(this,arguments)}}(),r.getTxWaitingSeconds=function(){var n=d()((function*(){return[]}));return function(){return n.apply(this,arguments)}}(),r.getUserNFTAssets=function(){var n=d()((function*(n){n.serviceData;return Promise.resolve(void 0)}));return function(t){return n.apply(this,arguments)}}(),l()(e)}(E.VaultContext),F=function(t){h()(r,t);var e=S(r);function r(){for(var n,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return(n=e.call.apply(e,[this].concat(r))).uuid=A.a.v4().toString(),n}var o=r.prototype;return o.init=function(){var n=d()((function*(n){yield this.initProvider(),yield this.initKeyring(n)}));return function(t){return n.apply(this,arguments)}}(),o.initKeyring=function(){var n=d()((function*(n){this.keyring=yield n.keyringCreator(this)}));return function(t){return n.apply(this,arguments)}}(),o.signTransaction=function(){var n=d()((function*(n,t){return this.keyring.signTransaction(n,t)}));return function(t,e){return n.apply(this,arguments)}}(),o.signAndSendTransaction=function(){var n=d()((function*(n,t,e){var r=yield this.signTransaction(n,t);return e?R(R({},r),{},{encodedTx:n.encodedTx}):this.broadcastTransaction(R(R({},r),{},{encodedTx:n.encodedTx}))}));return function(t,e,r){return n.apply(this,arguments)}}(),o.broadcastTransaction=function(){var n=d()((function*(n,t){P.default.engine.info("broadcastTransaction START:",{rawTx:n.rawTx});var e=yield this.engine.providerManager.broadcastTransaction(this.networkId,n.rawTx,t);return P.default.engine.info("broadcastTransaction END:",{txid:e,rawTx:n.rawTx}),R(R({},n),{},{txid:e,encodedTx:n.encodedTx})}));return function(t,e){return n.apply(this,arguments)}}(),o.buildEncodedTxFromBatchTransfer=function(){var n=d()((function*(n){throw new b.NotImplemented}));return function(t){return n.apply(this,arguments)}}(),o.buildEncodedTxsFromSetApproveForAll=function(){var n=d()((function*(n,t){throw new b.NotImplemented}));return function(t,e){return n.apply(this,arguments)}}(),o.activateAccount=function(){var n=d()((function*(){throw new b.NotImplemented}));return function(){return n.apply(this,arguments)}}(),o.activateToken=function(){var n=d()((function*(n,t){throw new b.NotImplemented}));return function(t,e){return n.apply(this,arguments)}}(),o.getTokenAllowance=function(){var n=d()((function*(n,t){throw new b.NotImplemented}));return function(t,e){return n.apply(this,arguments)}}(),o.batchTokensAllowance=function(){var n=d()((function*(n,t){throw new b.NotImplemented}));return function(t,e){return n.apply(this,arguments)}}(),o.getOutputAccount=function(){var n=d()((function*(){var n=yield this.getDbAccount({noCache:!0});return{id:n.id,name:n.name,type:n.type,path:n.path,coinType:n.coinType,tokens:[],address:n.address,template:n.template,pubKey:i()(n,"pub","")}}));return function(){return n.apply(this,arguments)}}(),o.getAccountBalance=function(){var n=d()((function*(n){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],e=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=yield this.getDbAccount(),o=i.address;return this.getBalances((t?[{address:o}]:[]).concat(n.map((function(n){return{address:o,tokenAddress:n}}))),e,r)}));return function(t){return n.apply(this,arguments)}}(),o.updatePendingTxs=function(){var n=d()((function*(n){throw new b.NotImplemented}));return function(t){return n.apply(this,arguments)}}(),o.getAccountNonce=function(){var n=d()((function*(){return Promise.resolve(null)}));return function(){return n.apply(this,arguments)}}(),o.fixActionDirection=function(){var n=d()((function*(n){var t,e,r,i,o=n.action,u=n.accountAddress;(o.direction=O.IDecodedTxDirection.OTHER,o.type===O.IDecodedTxActionType.NATIVE_TRANSFER)&&(o.direction=yield this.buildTxActionDirection({from:(null==(t=o.nativeTransfer)?void 0:t.from)||"",to:(null==(e=o.nativeTransfer)?void 0:e.to)||"",address:u}));o.type===O.IDecodedTxActionType.TOKEN_TRANSFER&&(o.direction=yield this.buildTxActionDirection({from:(null==(r=o.tokenTransfer)?void 0:r.from)||"",to:(null==(i=o.tokenTransfer)?void 0:i.to)||"",address:u}));return o}));return function(t){return n.apply(this,arguments)}}(),o.fixDecodedTx=function(){var n=d()((function*(n){var t,e;n.createdAt=null!=(t=n.createdAt)?t:Date.now();var r=null==(e=n.encodedTx)?void 0:e.nonce;n.nonce=a()(r)?n.nonce:new w.a(r).toNumber();for(var i=n.owner,o=0;o<n.actions.length;o+=1){var u=n.actions[o];yield this.fixActionDirection({action:u,accountAddress:i})}if(n.outputActions)for(var c=0;c<n.outputActions.length;c+=1){var s=n.outputActions[c];yield this.fixActionDirection({action:s,accountAddress:i})}return Promise.resolve(n)}));return function(t){return n.apply(this,arguments)}}(),o.fixHistoryTx=function(){var n=d()((function*(n){return n.decodedTx=yield this.fixDecodedTx(n.decodedTx),Promise.resolve(n)}));return function(t){return n.apply(this,arguments)}}(),o.buildHistoryTx=function(){var n=d()((function*(n){var t=n.historyTxToMerge,e=(n.encodedTx,n.decodedTx),r=n.signedTx,i=n.isSigner,o=n.isLocalCreated,u=(null==r?void 0:r.txid)||(null==e?void 0:e.txid)||"";if(!u)throw new Error("buildHistoryTx txid not found");var c=yield this.getAccountAddress();e.txid=u||e.txid,e.owner=c,i&&(e.signer=c),null!=r&&r.txKey&&(e.extraInfo?e.extraInfo.txKey=r.txKey:e.extraInfo={txKey:r.txKey});var a=R(R({id:this.networkId+"_"+u+"_"+this.accountId,isLocalCreated:Boolean(o)},t),{},{decodedTx:e});return a=yield this.fixHistoryTx(a),Promise.resolve(a)}));return function(t){return n.apply(this,arguments)}}(),o.checkIsScamHistoryTx=function(){var n=d()((function*(n){return!1}));return function(t){return n.apply(this,arguments)}}(),o.fetchOnChainHistory=function(){var n=d()((function*(n){throw new b.NotImplemented}));return function(t){return n.apply(this,arguments)}}(),o.fixAddressCase=function(n){return Promise.resolve(n)},o.buildTxActionDirection=function(){var n=d()((function*(n){var t=n.from,e=n.to,r=n.address;return t=yield this.fixAddressCase(t||""),e=yield this.fixAddressCase(e),r=yield this.fixAddressCase(r),t===e&&t===r?O.IDecodedTxDirection.SELF:t&&t===r?O.IDecodedTxDirection.OUT:e&&e===r?O.IDecodedTxDirection.IN:O.IDecodedTxDirection.OTHER}));return function(t){return n.apply(this,arguments)}}(),o.getNextNonce=function(){var n=d()((function*(n,t){var e,r,i=null!=(e=null==(r=(yield this.engine.providerManager.getAddresses(n,[t.address]))[0])?void 0:r.nonce)?e:0,o=(yield this.engine.getHistory(n,t.id,void 0,!1),yield k.default.history.getMaxPendingNonce({accountId:this.accountId,networkId:n})),u=yield k.default.history.getPendingNonceList({accountId:this.accountId,networkId:n}),c=Math.max(a()(o)?0:o+1,i);if(Number.isNaN(c)&&(c=i),c>i)for(var s=i;s<c;s+=1)if(!u.includes(s)){c=s;break}if(c<i&&(c=i),c-i>=I.HISTORY_CONSTS.PENDING_QUEUE_MAX_LENGTH)throw new b.PendingQueueTooLong(I.HISTORY_CONSTS.PENDING_QUEUE_MAX_LENGTH);return c}));return function(t,e){return n.apply(this,arguments)}}(),o.validateSendAmount=function(n,t,e){return Promise.resolve(!0)},o.notifyChainChanged=function(n,t){},o.getFetchBalanceAddress=function(n){return Promise.resolve(n.address)},o.getPrivateKeyByCredential=function(t){return Promise.resolve(n.from(t.startsWith("0x")?t.slice(2):t,"hex"))},o.getMinDepositAmount=function(){var n=d()((function*(){return"0"}));return function(){return n.apply(this,arguments)}}(),o.specialCheckEncodedTx=function(){var n=d()((function*(n){return{success:!0}}));return function(t){return n.apply(this,arguments)}}(),o.getAllUsedAddress=function(){var n=d()((function*(){return Promise.resolve([])}));return function(){return n.apply(this,arguments)}}(),l()(r)}(M)}.call(this,e(26).Buffer)},6087:function(n,t,e){"use strict";e.r(t),e.d(t,"default",(function(){return v}));var r=e(6),i=e.n(r),o=e(9),u=e.n(o),c=e(14),a=e.n(c),s=e(7),d=e.n(s),f=e(3912),l=e(2733);function p(n){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var e,r=d()(n);if(t){var i=d()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return a()(this,e)}}var h=function(){},v=function(n){u()(e,n);var t=p(e);function e(){for(var n,e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return(n=t.call.apply(t,[this].concat(r))).settings=l.default,n.keyringMap={hd:h,hw:h,imported:h,watching:h,external:h},n}return i()(e)}(f.VaultBase)}}]);